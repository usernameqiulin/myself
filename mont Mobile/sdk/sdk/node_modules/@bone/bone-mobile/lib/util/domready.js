'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = domready;
function domready() {
  if (typeof document === 'undefined') {
    return function () {};
  }

  var doc = document;
  var callbacks = [];
  var _listener = void 0;
  var doScroll = doc.documentElement.doScroll;
  var domContentLoaded = 'DOMContentLoaded';
  var loaded = (doScroll ? /^loaded|^c/ : /^loaded|^i|^c/).test(doc.readyState);
  if (!loaded) {
    doc.addEventListener(domContentLoaded, _listener = function listener() {
      doc.removeEventListener(domContentLoaded, _listener);
      loaded = 1;
      while (callbacks.length > 0) {
        _listener = callbacks.shift();
        _listener();
      }
    });
  }

  return function (fn) {
    loaded ? setTimeout(fn, 0) : callbacks.push(fn);
  };
}