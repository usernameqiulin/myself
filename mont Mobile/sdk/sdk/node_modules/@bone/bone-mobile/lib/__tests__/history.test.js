'use strict';

var _boneMv = require('@bone/bone-mv');

var _history = require('../history');

describe('test router.createHistory', function () {
  // @todo
  // history.mode hasn't been tested

  afterEach(function () {
    (0, _history.removeHistory)();
  });

  test('basic usage', function () {
    var history = (0, _history.createHistory)();

    expect(history).toBeDefined();
    expect(typeof history.push).toEqual('function');
  });

  test('history should be singleton', function () {
    expect(function () {
      (0, _history.createHistory)();

      // duplicate creation
      (0, _history.createHistory)();
    }).toThrow();
  });
});

describe('test router.createHistoryAPI', function () {
  test('basic usage', function () {
    var store = (0, _boneMv.createStore)();
    (0, _history.createHistory)();
    var historyAPI = (0, _history.createHistoryAPI)(store);

    expect(historyAPI.length).toEqual(1);
    expect(historyAPI.location).toBeDefined();
  });
});