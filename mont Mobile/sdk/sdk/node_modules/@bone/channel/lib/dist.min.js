!function(e){var n={};function i(o){if(n[o])return n[o].exports;var t=n[o]={i:o,l:!1,exports:{}};return e[o].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=n,i.d=function(e,n,o){i.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="",i(i.s=3)}([function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.CHANNEL="BoneChannel",n.CHANNEL_MESSAGE="message",n.CHANNEL_CONNECT_STATUS_CHANGE="connectStatusChange",n.CHANNEL_CONNECT_STATUS_CONNECTED="connected",n.CHANNEL_CONNECT_STATUS_DISCONNECTED="disconnected",n.CHANNEL_NA_DOWSTREAM="BoneDownstream",n.CHANNEL_NA_CONNECT_STATUS_CHANGE="BoneChannelConnectStatusChange"},function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,t=i(6),_=i(7),s=(o=_)&&o.__esModule?o:{default:o};var c=Symbol("event-emitter");n.default={on:function(e,n){(0,s.default)(t.Type.isString(e),"Unexpected type "+t.Type.getType(e)+", 'evtName' should be string"),(0,s.default)(t.Type.isFunction(n),"Unexpected type "+t.Type.getType(n)+", 'callback' should be function"),this[c]||(this[c]={});var i=this.listeners(e);return i.push(n),this[c][e]=i,this},one:function(e,n){var i=this;return(0,s.default)(t.Type.isString(e),"Unexpected type "+t.Type.getType(e)+", 'evtName' should be string"),(0,s.default)(t.Type.isFunction(n),"Unexpected type "+t.Type.getType(n)+", 'callback' should be function"),this.on(e,function o(){for(var t=arguments.length,_=Array(t),s=0;s<t;s++)_[s]=arguments[s];n.apply(i,_),i.off(e,o)})},off:function(e,n){if((0,s.default)(t.Type.isString(e),"Unexpected type "+t.Type.getType(e)+", 'evtName' should be string"),0===this.listenerCount(e))return this;if(!n)return this[c][e]=[],this;var i=this.listeners(e),o=i.indexOf(n);return o>-1&&i.splice(o,1),this},emit:function(e){if((0,s.default)(t.Type.isString(e),"Unexpected type "+t.Type.getType(e)+", 'evtName' should be string"),0!==this.listenerCount(e)){for(var n=this.listeners(e).slice(0),i=arguments.length,o=Array(i>1?i-1:0),_=1;_<i;_++)o[_-1]=arguments[_];for(var c=0,r=n.length;c<r;c++)if(!1===n[c].apply(this,o))return!1}},listeners:function(e){return(0,s.default)(t.Type.isString(e),"Unexpected type "+t.Type.getType(e)+", 'evtName' should be string"),this[c]&&this[c][e]?this[c][e]:[]},listenerCount:function(e){return(0,s.default)(t.Type.isString(e),"Unexpected type "+t.Type.getType(e)+", 'evtName' should be string"),this.listeners(e).length}}},function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,i,o){return i&&e(n.prototype,i),o&&e(n,o),n}}();function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _=Symbol("conf"),s=Symbol("filter"),c={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"},r={debug:0,info:1,warn:2,error:3},a={CONSOLE:console},p={development:{level:c.DEBUG,appender:a.CONSOLE},test:{level:c.WARN,appender:a.CONSOLE},production:{level:c.ERROR,appender:a.CONSOLE}},l={npm_config_save_dev:"",npm_config_legacy_bundling:"",npm_config_dry_run:"",npm_config_only:"",npm_config_browser:"",npm_config_viewer:"man",npm_config_commit_hooks:"true",npm_package_gitHead:"c79c196dc7cb6f692734c4b9266aeff4be3a9444",npm_config_also:"",npm_package_devDependencies_babel_plugin_transform_class_properties:"^6.24.1",npm_config_rollback:"true",TERM_PROGRAM:"Apple_Terminal",npm_config_usage:"",NODE:"/usr/local/bin/node",INIT_CWD:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel",ANDROID_HOME:"/Users/NicolasWan/Library/Android/sdk",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__username:"nbwansjtu",npm_config_globalignorefile:"/usr/local/etc/npmignore",SHELL:"/bin/bash",TERM:"xterm-256color",npm_config_init_author_url:"",npm_config_shell:"/bin/bash",npm_config_maxsockets:"50",npm_package_dependencies__bone_paho_client:"^0.1.0",npm_config_parseable:"",npm_config_shrinkwrap:"true",npm_config_metrics_registry:"https://registry-node.aliyun.com/org/YscSvypAq7EUU~8GmyAjOp/registry/aliyunIoT/",TMPDIR:"/var/folders/5b/rznq7t7j19v207q52brt694h0000gn/T/",npm_config_timing:"",npm_config_init_license:"ISC",Apple_PubSub_Socket_Render:"/private/tmp/com.apple.launchd.5OioXFWlNU/Render",npm_config_if_present:"",npm_package_devDependencies_babel_core:"^6.26.0",TERM_PROGRAM_VERSION:"400",npm_package_scripts_buildLib:"babel src --out-dir lib",npm_config_sign_git_tag:"",npm_config_init_author_email:"",npm_config_cache_max:"Infinity",npm_config_long:"",npm_config_local_address:"",npm_config_cert:"",npm_config_git_tag_version:"true",TERM_SESSION_ID:"C6717DCE-CB6A-4BE1-842C-645DE9AEE152",npm_config_fetch_retries:"2",npm_config_registry:"https://registry-node.aliyun.com/org/YscSvypAq7EUU~8GmyAjOp/registry/aliyunIoT/",npm_package_repository_url:"git+http://gitlab.alibaba-inc.com/bone/channel.git",npm_config_versions:"",npm_config_key:"",npm_config_message:"%s",npm_package_readmeFilename:"README.md",npm_package_devDependencies_webpack:"^3.8.1",npm_package_description:"channel为基于mqtt的长连接通信协议封装，可直接使用完整库，也可以单独引用接口层（使用Native SDK时）或实现层（模拟Native SDK bridge）",USER:"NicolasWan",npm_package_devDependencies_esdoc:"^1.0.4",npm_package_license:"ISC",npm_package_devDependencies_esdoc_ecmascript_proposal_plugin:"^1.0.0",npm_config_globalconfig:"/usr/local/etc/npmrc",npm_config_prefer_online:"",npm_config_always_auth:"",npm_config_logs_max:"10",npm_package_devDependencies_babel_loader:"^7.1.2",npm_package_scripts_prepublish:"npm run build",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.yEVutTkC71/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x19:0x34",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",npm_config_global_style:"",npm_config_cache_lock_retries:"10",npm_package_dependencies__bone_event_emitter:"^0.1.4",npm_config_cafile:"",npm_package_author_name:"amos",npm_config_heading:"npm",npm_package_devDependencies_uglifyjs_webpack_plugin:"^1.0.1",YUNOS_SDK_HOME:"/Applications/YunOS-SDK",npm_config_read_only:"",npm_config_offline:"",npm_config_searchlimit:"20",npm_config_fetch_retry_mintimeout:"10000",npm_package_scripts_doc:"esdoc",npm_config_json:"",npm_config_access:"",npm_config_argv:'{"remain":[],"cooked":["run","buildDist"],"original":["run","buildDist"]}',PATH:"/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/lib/node_modules/bnpm/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/NicolasWan/Desktop/Libraries/OSS_Python_API_20160419:/Applications/YunOS-SDK/adb:/Users/NicolasWan/Desktop/Libraries/apache-maven-3.3.9/bin:/Users/NicolasWan/Library/Android/sdk/tools:/Users/NicolasWan/Library/Android/sdk/platform-tools",npm_config_allow_same_version:"",npm_config_https_proxy:"",npm_config_engine_strict:"",npm_config_description:"true",_:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin/webpack",npm_config_init_module:"/Users/NicolasWan/.npm-init.js",npm_config_userconfig:"/Users/NicolasWan/.bonenpmrc",npm_config_cidr:"",PWD:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel",npm_config_user:"",npm_config_node_version:"8.11.1",JAVA_HOME:"/Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home",npm_lifecycle_event:"buildDist",npm_config_ignore_prepublish:"",npm_config_save:"true",npm_config_editor:"vi",npm_config_auth_type:"legacy",npm_package_keywords_0:"mqtt",npm_package_repository_type:"git",npm_package_name:"@bone/channel",LANG:"zh_CN.UTF-8",npm_config_script_shell:"",npm_config_tag:"latest",npm_package_keywords_1:"websocket",npm_config_global:"",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__always_auth:"",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__email:"nbwansjtu@163.com",npm_config_progress:"true",npm_package_scripts_build:"npm run buildLib; npm run buildDist; npm run doc",npm_config_ham_it_up:"",npm_config_searchstaleness:"900",npm_config_optional:"true",XPC_FLAGS:"0x0",npm_config_save_prod:"",npm_config_force:"",npm_config_bin_links:"true",npm_config_searchopts:"",npm_config_node_gyp:"/usr/local/lib/node_modules/bnpm/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_config_depth:"Infinity",npm_package_main:"lib/index.js",npm_config_sso_poll_frequency:"500",npm_config_rebuild_bundle:"true",npm_package_version:"0.1.13",XPC_SERVICE_NAME:"0",npm_config_unicode:"true",SHLVL:"4",HOME:"/Users/NicolasWan",npm_config_fetch_retry_maxtimeout:"60000",npm_package_scripts_test:'echo "Error: no test specified" && exit 1',npm_config_ca:"",npm_config_tag_version_prefix:"v",npm_config_strict_ssl:"true",npm_config_sso_type:"oauth",npm_config_scripts_prepend_node_path:"warn-only",npm_config_save_prefix:"^",npm_config_loglevel:"notice",npm_config_save_exact:"",npm_config_dev:"",npm_config_group:"20",npm_config_fetch_retry_factor:"10",npm_config_version:"",npm_config_prefer_offline:"",npm_config_cache_lock_stale:"60000",npm_config_otp:"",npm_config_cache_min:"10",npm_config_disturl:"https://npm.taobao.org/mirrors/node",npm_package_devDependencies_babel_preset_env:"^1.6.1",npm_package_scripts_buildDist:"webpack --env=prod --progress --profile --colors",npm_config_searchexclude:"",npm_config_cache:"/Users/NicolasWan/.npm",npm_package_devDependencies_babel_cli:"^6.26.0",LOGNAME:"NicolasWan",npm_lifecycle_script:"webpack --env=prod --progress --profile --colors",npm_config_color:"true",npm_config_proxy:"",npm_config_package_lock:"true",npm_config_package_lock_only:"",npm_config_save_optional:"",npm_config_ignore_scripts:"",npm_config_user_agent:"npm/5.7.1 node/v8.11.1 darwin x64",npm_config_cache_lock_wait:"10000",npm_package_dependencies__bone_logger:"^0.1.6",npm_config_production:"",npm_config_send_metrics:"",npm_config_save_bundle:"",npm_config_node_options:"",npm_config_umask:"0022",npm_config_init_version:"1.0.0",npm_package_devDependencies_esdoc_standard_plugin:"^1.0.0",npm_config_init_author_name:"",npm_config_git:"git",npm_config_scope:"",npm_config_onload_script:"",npm_config_unsafe_perm:"true",npm_config_tmp:"/var/folders/5b/rznq7t7j19v207q52brt694h0000gn/T",npm_node_execpath:"/usr/local/bin/node",npm_config_link:"",npm_config_prefix:"/usr/local"}&&{npm_config_save_dev:"",npm_config_legacy_bundling:"",npm_config_dry_run:"",npm_config_only:"",npm_config_browser:"",npm_config_viewer:"man",npm_config_commit_hooks:"true",npm_package_gitHead:"c79c196dc7cb6f692734c4b9266aeff4be3a9444",npm_config_also:"",npm_package_devDependencies_babel_plugin_transform_class_properties:"^6.24.1",npm_config_rollback:"true",TERM_PROGRAM:"Apple_Terminal",npm_config_usage:"",NODE:"/usr/local/bin/node",INIT_CWD:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel",ANDROID_HOME:"/Users/NicolasWan/Library/Android/sdk",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__username:"nbwansjtu",npm_config_globalignorefile:"/usr/local/etc/npmignore",SHELL:"/bin/bash",TERM:"xterm-256color",npm_config_init_author_url:"",npm_config_shell:"/bin/bash",npm_config_maxsockets:"50",npm_package_dependencies__bone_paho_client:"^0.1.0",npm_config_parseable:"",npm_config_shrinkwrap:"true",npm_config_metrics_registry:"https://registry-node.aliyun.com/org/YscSvypAq7EUU~8GmyAjOp/registry/aliyunIoT/",TMPDIR:"/var/folders/5b/rznq7t7j19v207q52brt694h0000gn/T/",npm_config_timing:"",npm_config_init_license:"ISC",Apple_PubSub_Socket_Render:"/private/tmp/com.apple.launchd.5OioXFWlNU/Render",npm_config_if_present:"",npm_package_devDependencies_babel_core:"^6.26.0",TERM_PROGRAM_VERSION:"400",npm_package_scripts_buildLib:"babel src --out-dir lib",npm_config_sign_git_tag:"",npm_config_init_author_email:"",npm_config_cache_max:"Infinity",npm_config_long:"",npm_config_local_address:"",npm_config_cert:"",npm_config_git_tag_version:"true",TERM_SESSION_ID:"C6717DCE-CB6A-4BE1-842C-645DE9AEE152",npm_config_fetch_retries:"2",npm_config_registry:"https://registry-node.aliyun.com/org/YscSvypAq7EUU~8GmyAjOp/registry/aliyunIoT/",npm_package_repository_url:"git+http://gitlab.alibaba-inc.com/bone/channel.git",npm_config_versions:"",npm_config_key:"",npm_config_message:"%s",npm_package_readmeFilename:"README.md",npm_package_devDependencies_webpack:"^3.8.1",npm_package_description:"channel为基于mqtt的长连接通信协议封装，可直接使用完整库，也可以单独引用接口层（使用Native SDK时）或实现层（模拟Native SDK bridge）",USER:"NicolasWan",npm_package_devDependencies_esdoc:"^1.0.4",npm_package_license:"ISC",npm_package_devDependencies_esdoc_ecmascript_proposal_plugin:"^1.0.0",npm_config_globalconfig:"/usr/local/etc/npmrc",npm_config_prefer_online:"",npm_config_always_auth:"",npm_config_logs_max:"10",npm_package_devDependencies_babel_loader:"^7.1.2",npm_package_scripts_prepublish:"npm run build",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.yEVutTkC71/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x19:0x34",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",npm_config_global_style:"",npm_config_cache_lock_retries:"10",npm_package_dependencies__bone_event_emitter:"^0.1.4",npm_config_cafile:"",npm_package_author_name:"amos",npm_config_heading:"npm",npm_package_devDependencies_uglifyjs_webpack_plugin:"^1.0.1",YUNOS_SDK_HOME:"/Applications/YunOS-SDK",npm_config_read_only:"",npm_config_offline:"",npm_config_searchlimit:"20",npm_config_fetch_retry_mintimeout:"10000",npm_package_scripts_doc:"esdoc",npm_config_json:"",npm_config_access:"",npm_config_argv:'{"remain":[],"cooked":["run","buildDist"],"original":["run","buildDist"]}',PATH:"/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/lib/node_modules/bnpm/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/NicolasWan/Desktop/Libraries/OSS_Python_API_20160419:/Applications/YunOS-SDK/adb:/Users/NicolasWan/Desktop/Libraries/apache-maven-3.3.9/bin:/Users/NicolasWan/Library/Android/sdk/tools:/Users/NicolasWan/Library/Android/sdk/platform-tools",npm_config_allow_same_version:"",npm_config_https_proxy:"",npm_config_engine_strict:"",npm_config_description:"true",_:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin/webpack",npm_config_init_module:"/Users/NicolasWan/.npm-init.js",npm_config_userconfig:"/Users/NicolasWan/.bonenpmrc",npm_config_cidr:"",PWD:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel",npm_config_user:"",npm_config_node_version:"8.11.1",JAVA_HOME:"/Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home",npm_lifecycle_event:"buildDist",npm_config_ignore_prepublish:"",npm_config_save:"true",npm_config_editor:"vi",npm_config_auth_type:"legacy",npm_package_keywords_0:"mqtt",npm_package_repository_type:"git",npm_package_name:"@bone/channel",LANG:"zh_CN.UTF-8",npm_config_script_shell:"",npm_config_tag:"latest",npm_package_keywords_1:"websocket",npm_config_global:"",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__always_auth:"",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__email:"nbwansjtu@163.com",npm_config_progress:"true",npm_package_scripts_build:"npm run buildLib; npm run buildDist; npm run doc",npm_config_ham_it_up:"",npm_config_searchstaleness:"900",npm_config_optional:"true",XPC_FLAGS:"0x0",npm_config_save_prod:"",npm_config_force:"",npm_config_bin_links:"true",npm_config_searchopts:"",npm_config_node_gyp:"/usr/local/lib/node_modules/bnpm/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_config_depth:"Infinity",npm_package_main:"lib/index.js",npm_config_sso_poll_frequency:"500",npm_config_rebuild_bundle:"true",npm_package_version:"0.1.13",XPC_SERVICE_NAME:"0",npm_config_unicode:"true",SHLVL:"4",HOME:"/Users/NicolasWan",npm_config_fetch_retry_maxtimeout:"60000",npm_package_scripts_test:'echo "Error: no test specified" && exit 1',npm_config_ca:"",npm_config_tag_version_prefix:"v",npm_config_strict_ssl:"true",npm_config_sso_type:"oauth",npm_config_scripts_prepend_node_path:"warn-only",npm_config_save_prefix:"^",npm_config_loglevel:"notice",npm_config_save_exact:"",npm_config_dev:"",npm_config_group:"20",npm_config_fetch_retry_factor:"10",npm_config_version:"",npm_config_prefer_offline:"",npm_config_cache_lock_stale:"60000",npm_config_otp:"",npm_config_cache_min:"10",npm_config_disturl:"https://npm.taobao.org/mirrors/node",npm_package_devDependencies_babel_preset_env:"^1.6.1",npm_package_scripts_buildDist:"webpack --env=prod --progress --profile --colors",npm_config_searchexclude:"",npm_config_cache:"/Users/NicolasWan/.npm",npm_package_devDependencies_babel_cli:"^6.26.0",LOGNAME:"NicolasWan",npm_lifecycle_script:"webpack --env=prod --progress --profile --colors",npm_config_color:"true",npm_config_proxy:"",npm_config_package_lock:"true",npm_config_package_lock_only:"",npm_config_save_optional:"",npm_config_ignore_scripts:"",npm_config_user_agent:"npm/5.7.1 node/v8.11.1 darwin x64",npm_config_cache_lock_wait:"10000",npm_package_dependencies__bone_logger:"^0.1.6",npm_config_production:"",npm_config_send_metrics:"",npm_config_save_bundle:"",npm_config_node_options:"",npm_config_umask:"0022",npm_config_init_version:"1.0.0",npm_package_devDependencies_esdoc_standard_plugin:"^1.0.0",npm_config_init_author_name:"",npm_config_git:"git",npm_config_scope:"",npm_config_onload_script:"",npm_config_unsafe_perm:"true",npm_config_tmp:"/var/folders/5b/rznq7t7j19v207q52brt694h0000gn/T",npm_node_execpath:"/usr/local/bin/node",npm_config_link:"",npm_config_prefix:"/usr/local"}.NODE_ENV?p[{npm_config_save_dev:"",npm_config_legacy_bundling:"",npm_config_dry_run:"",npm_config_only:"",npm_config_browser:"",npm_config_viewer:"man",npm_config_commit_hooks:"true",npm_package_gitHead:"c79c196dc7cb6f692734c4b9266aeff4be3a9444",npm_config_also:"",npm_package_devDependencies_babel_plugin_transform_class_properties:"^6.24.1",npm_config_rollback:"true",TERM_PROGRAM:"Apple_Terminal",npm_config_usage:"",NODE:"/usr/local/bin/node",INIT_CWD:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel",ANDROID_HOME:"/Users/NicolasWan/Library/Android/sdk",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__username:"nbwansjtu",npm_config_globalignorefile:"/usr/local/etc/npmignore",SHELL:"/bin/bash",TERM:"xterm-256color",npm_config_init_author_url:"",npm_config_shell:"/bin/bash",npm_config_maxsockets:"50",npm_package_dependencies__bone_paho_client:"^0.1.0",npm_config_parseable:"",npm_config_shrinkwrap:"true",npm_config_metrics_registry:"https://registry-node.aliyun.com/org/YscSvypAq7EUU~8GmyAjOp/registry/aliyunIoT/",TMPDIR:"/var/folders/5b/rznq7t7j19v207q52brt694h0000gn/T/",npm_config_timing:"",npm_config_init_license:"ISC",Apple_PubSub_Socket_Render:"/private/tmp/com.apple.launchd.5OioXFWlNU/Render",npm_config_if_present:"",npm_package_devDependencies_babel_core:"^6.26.0",TERM_PROGRAM_VERSION:"400",npm_package_scripts_buildLib:"babel src --out-dir lib",npm_config_sign_git_tag:"",npm_config_init_author_email:"",npm_config_cache_max:"Infinity",npm_config_long:"",npm_config_local_address:"",npm_config_cert:"",npm_config_git_tag_version:"true",TERM_SESSION_ID:"C6717DCE-CB6A-4BE1-842C-645DE9AEE152",npm_config_fetch_retries:"2",npm_config_registry:"https://registry-node.aliyun.com/org/YscSvypAq7EUU~8GmyAjOp/registry/aliyunIoT/",npm_package_repository_url:"git+http://gitlab.alibaba-inc.com/bone/channel.git",npm_config_versions:"",npm_config_key:"",npm_config_message:"%s",npm_package_readmeFilename:"README.md",npm_package_devDependencies_webpack:"^3.8.1",npm_package_description:"channel为基于mqtt的长连接通信协议封装，可直接使用完整库，也可以单独引用接口层（使用Native SDK时）或实现层（模拟Native SDK bridge）",USER:"NicolasWan",npm_package_devDependencies_esdoc:"^1.0.4",npm_package_license:"ISC",npm_package_devDependencies_esdoc_ecmascript_proposal_plugin:"^1.0.0",npm_config_globalconfig:"/usr/local/etc/npmrc",npm_config_prefer_online:"",npm_config_always_auth:"",npm_config_logs_max:"10",npm_package_devDependencies_babel_loader:"^7.1.2",npm_package_scripts_prepublish:"npm run build",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.yEVutTkC71/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x19:0x34",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",npm_config_global_style:"",npm_config_cache_lock_retries:"10",npm_package_dependencies__bone_event_emitter:"^0.1.4",npm_config_cafile:"",npm_package_author_name:"amos",npm_config_heading:"npm",npm_package_devDependencies_uglifyjs_webpack_plugin:"^1.0.1",YUNOS_SDK_HOME:"/Applications/YunOS-SDK",npm_config_read_only:"",npm_config_offline:"",npm_config_searchlimit:"20",npm_config_fetch_retry_mintimeout:"10000",npm_package_scripts_doc:"esdoc",npm_config_json:"",npm_config_access:"",npm_config_argv:'{"remain":[],"cooked":["run","buildDist"],"original":["run","buildDist"]}',PATH:"/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/lib/node_modules/bnpm/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/NicolasWan/Desktop/Libraries/OSS_Python_API_20160419:/Applications/YunOS-SDK/adb:/Users/NicolasWan/Desktop/Libraries/apache-maven-3.3.9/bin:/Users/NicolasWan/Library/Android/sdk/tools:/Users/NicolasWan/Library/Android/sdk/platform-tools",npm_config_allow_same_version:"",npm_config_https_proxy:"",npm_config_engine_strict:"",npm_config_description:"true",_:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin/webpack",npm_config_init_module:"/Users/NicolasWan/.npm-init.js",npm_config_userconfig:"/Users/NicolasWan/.bonenpmrc",npm_config_cidr:"",PWD:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel",npm_config_user:"",npm_config_node_version:"8.11.1",JAVA_HOME:"/Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home",npm_lifecycle_event:"buildDist",npm_config_ignore_prepublish:"",npm_config_save:"true",npm_config_editor:"vi",npm_config_auth_type:"legacy",npm_package_keywords_0:"mqtt",npm_package_repository_type:"git",npm_package_name:"@bone/channel",LANG:"zh_CN.UTF-8",npm_config_script_shell:"",npm_config_tag:"latest",npm_package_keywords_1:"websocket",npm_config_global:"",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__always_auth:"",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__email:"nbwansjtu@163.com",npm_config_progress:"true",npm_package_scripts_build:"npm run buildLib; npm run buildDist; npm run doc",npm_config_ham_it_up:"",npm_config_searchstaleness:"900",npm_config_optional:"true",XPC_FLAGS:"0x0",npm_config_save_prod:"",npm_config_force:"",npm_config_bin_links:"true",npm_config_searchopts:"",npm_config_node_gyp:"/usr/local/lib/node_modules/bnpm/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_config_depth:"Infinity",npm_package_main:"lib/index.js",npm_config_sso_poll_frequency:"500",npm_config_rebuild_bundle:"true",npm_package_version:"0.1.13",XPC_SERVICE_NAME:"0",npm_config_unicode:"true",SHLVL:"4",HOME:"/Users/NicolasWan",npm_config_fetch_retry_maxtimeout:"60000",npm_package_scripts_test:'echo "Error: no test specified" && exit 1',npm_config_ca:"",npm_config_tag_version_prefix:"v",npm_config_strict_ssl:"true",npm_config_sso_type:"oauth",npm_config_scripts_prepend_node_path:"warn-only",npm_config_save_prefix:"^",npm_config_loglevel:"notice",npm_config_save_exact:"",npm_config_dev:"",npm_config_group:"20",npm_config_fetch_retry_factor:"10",npm_config_version:"",npm_config_prefer_offline:"",npm_config_cache_lock_stale:"60000",npm_config_otp:"",npm_config_cache_min:"10",npm_config_disturl:"https://npm.taobao.org/mirrors/node",npm_package_devDependencies_babel_preset_env:"^1.6.1",npm_package_scripts_buildDist:"webpack --env=prod --progress --profile --colors",npm_config_searchexclude:"",npm_config_cache:"/Users/NicolasWan/.npm",npm_package_devDependencies_babel_cli:"^6.26.0",LOGNAME:"NicolasWan",npm_lifecycle_script:"webpack --env=prod --progress --profile --colors",npm_config_color:"true",npm_config_proxy:"",npm_config_package_lock:"true",npm_config_package_lock_only:"",npm_config_save_optional:"",npm_config_ignore_scripts:"",npm_config_user_agent:"npm/5.7.1 node/v8.11.1 darwin x64",npm_config_cache_lock_wait:"10000",npm_package_dependencies__bone_logger:"^0.1.6",npm_config_production:"",npm_config_send_metrics:"",npm_config_save_bundle:"",npm_config_node_options:"",npm_config_umask:"0022",npm_config_init_version:"1.0.0",npm_package_devDependencies_esdoc_standard_plugin:"^1.0.0",npm_config_init_author_name:"",npm_config_git:"git",npm_config_scope:"",npm_config_onload_script:"",npm_config_unsafe_perm:"true",npm_config_tmp:"/var/folders/5b/rznq7t7j19v207q52brt694h0000gn/T",npm_node_execpath:"/usr/local/bin/node",npm_config_link:"",npm_config_prefix:"/usr/local"}.NODE_ENV]:p.production,g=0,m=function(){function e(n){if(t(this,e),"object"!=typeof n)throw new Error("logger: conf must be object");this.conf=n}return o(e,null,[{key:"create",value:function(e){return new this(e)}},{key:"sn",value:function(){return"sn-"+ ++g}},{key:"conf",get:function(){return this[_]||l},set:function(e){this[_]=Object.assign({},this[_],e)}},{key:"filter",get:function(){return this[s]||function(){return!0}},set:function(e){var n=e;Array.isArray(e)&&(n=function(n){return(n.label||[]).filter(function(n){return e.indexOf(n)>-1}).length>0}),this[s]=n}},{key:"LEVEL",get:function(){return c}},{key:"DEF_CONF",get:function(){return p}},{key:"APPENDER",get:function(){return a}}]),o(e,[{key:"log",value:function(n){for(var i=arguments.length,o=Array(i>1?i-1:0),t=1;t<i;t++)o[t-1]=arguments[t];var _=new f({level:n,module:this.conf.module,message:o});return r[n]<r[e.conf.level]?_:e.filter(_)?(this.append(_),_):_}},{key:"append",value:function(n){var i,o=n.message.slice(0);if(!Array.isArray(o))throw new Erro("logger: illegal log messsage");var t,_,s="["+(t=n).module+"]:["+(t.time,((_=new Date).getFullYear()+"").slice(2)+"-"+(_.getMonth()+1)+"-"+_.getDate()+" "+_.getHours()+":"+_.getMinutes()+":"+_.getSeconds()+":"+_.getMilliseconds())+"]:["+t.level+"] - ";"string"==typeof o[0]?o[0]=s+o[0]:o.unshift(s),(i=e.conf.appender)[n.level].apply(i,function(e){if(Array.isArray(e)){for(var n=0,i=Array(e.length);n<e.length;n++)i[n]=e[n];return i}return Array.from(e)}(o))}},{key:"debug",value:function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.log.apply(this,[c.DEBUG].concat(n))}},{key:"info",value:function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.log.apply(this,[c.INFO].concat(n))}},{key:"warn",value:function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.log.apply(this,[c.WARN].concat(n))}},{key:"error",value:function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.log.apply(this,[c.ERROR].concat(n))}},{key:"conf",get:function(){return this[_]},set:function(e){this[_]=Object.assign({},this[_],e)}}]),e}();n.default=m;var f=function e(n){t(this,e),Object.assign(this,n),this.time=new Date}},function(e,n,i){"use strict";var o,t=i(4),_=(o=t)&&o.__esModule?o:{default:o};(void 0).channel=_.default},function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,i,o){return i&&e(n.prototype,i),o&&e(n,o),n}}(),t=r(i(5)),_=r(i(8)),s=r(i(1)),c=i(0);function r(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(){var n=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,s.default),(this.channel=new _.default({bridge:this})).on(c.CHANNEL_CONNECT_STATUS_CHANGE,function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];n.emit.apply(n,[c.CHANNEL_CONNECT_STATUS_CHANGE].concat(i))})}return o(e,[{key:"call",value:function(e,n,i,o){this.channel[n](i,o)}}]),e}();n.default=new t.default({bridge:new a})},function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,i,o){return i&&e(n.prototype,i),o&&e(n,o),n}}(),t=i(0),_=s(i(1));function s(e){return e&&e.__esModule?e:{default:e}}var c=s(i(2)).default.create({module:"ChannelInterface",label:["Bone","channel"]}),r=function(){function e(n){var i=n.bridge;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.EVENT_CONNECT_STATUS_CHANGE=t.CHANNEL_CONNECT_STATUS_CHANGE,this.bridge=i,Object.assign(this,_.default),i.on(t.CHANNEL_CONNECT_STATUS_CHANGE,function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];this.emit.apply(this,[t.CHANNEL_CONNECT_STATUS_CHANGE].concat(n))}.bind(this))}return o(e,[{key:"ready",value:function(e){var n=this;return c.debug("ready: waiting for interface to be ready",e),new Promise(function(i,o){n.bridge.call(t.CHANNEL,"ready",[e],function(e){if(e)return c.warn("ready: initialization error",e),void o(e);c.debug("ready: initialization done",e),i()})})}},{key:"subscribe",value:function(e,n){c.debug("subscribe:",e),this.bridge.call(t.CHANNEL,"subscribe",[e],n)}},{key:"unsubscribe",value:function(e,n){c.debug("unsubscribe:",e),this.bridge.call(t.CHANNEL,"unsubscribe",[e],n)}},{key:"publish",value:function(e,n,i){c.debug("publish:",e,n),this.bridge.call(t.CHANNEL,"publish",[e,n],i)}},{key:"request",value:function(e,n,i){c.debug("request:",e,n),this.bridge.call(t.CHANNEL,"request",[e,n],i)}}]),e}();n.default=r},function(e,n,i){"use strict";var o;o=function(){},e.exports.Type=o,o.getVersion=function(){return"1.0.0"},o.isString=function(e){return"string"==typeof e},o.isNumber=function(e,n){return"number"==typeof e||!0===n&&!isNaN(e)},o.isFloat=function(e,n){return o.isNumber(e,n)&&e%1!=0},o.isInteger=function(e,n){return o.isNumber(e,n)&&e%1==0},o.isScalar=function(e){return o.isString(e)||o.isNumber(e)},o.isArray=function(e){return e instanceof Array},o.isFunction=function(e){return"function"==typeof e},o.isObject=function(e){return e instanceof Object&&!o.isArray(e)&&!o.isFunction(e)},o.isImage=function(e){return e instanceof Image},o.isElement=function(e){return e instanceof HTMLElement},o.getType=function(e,n){if(void 0!==e&&null!==e){if(o.isNumber(e,n))return"number";if(o.isString(e))return"string";if(o.isArray(e))return"array";if(o.isFunction(e))return"function";if("object"==typeof e)return e.getType()||"object"}},String.prototype.isHex=function(){return/^([0-9a-f]+)$/i.test(this)}},function(e,n,i){"use strict";e.exports=function(e,n,i,o,t,_,s,c){if("production"!=={npm_config_save_dev:"",npm_config_legacy_bundling:"",npm_config_dry_run:"",npm_config_only:"",npm_config_browser:"",npm_config_viewer:"man",npm_config_commit_hooks:"true",npm_package_gitHead:"c79c196dc7cb6f692734c4b9266aeff4be3a9444",npm_config_also:"",npm_package_devDependencies_babel_plugin_transform_class_properties:"^6.24.1",npm_config_rollback:"true",TERM_PROGRAM:"Apple_Terminal",npm_config_usage:"",NODE:"/usr/local/bin/node",INIT_CWD:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel",ANDROID_HOME:"/Users/NicolasWan/Library/Android/sdk",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__username:"nbwansjtu",npm_config_globalignorefile:"/usr/local/etc/npmignore",SHELL:"/bin/bash",TERM:"xterm-256color",npm_config_init_author_url:"",npm_config_shell:"/bin/bash",npm_config_maxsockets:"50",npm_package_dependencies__bone_paho_client:"^0.1.0",npm_config_parseable:"",npm_config_shrinkwrap:"true",npm_config_metrics_registry:"https://registry-node.aliyun.com/org/YscSvypAq7EUU~8GmyAjOp/registry/aliyunIoT/",TMPDIR:"/var/folders/5b/rznq7t7j19v207q52brt694h0000gn/T/",npm_config_timing:"",npm_config_init_license:"ISC",Apple_PubSub_Socket_Render:"/private/tmp/com.apple.launchd.5OioXFWlNU/Render",npm_config_if_present:"",npm_package_devDependencies_babel_core:"^6.26.0",TERM_PROGRAM_VERSION:"400",npm_package_scripts_buildLib:"babel src --out-dir lib",npm_config_sign_git_tag:"",npm_config_init_author_email:"",npm_config_cache_max:"Infinity",npm_config_long:"",npm_config_local_address:"",npm_config_cert:"",npm_config_git_tag_version:"true",TERM_SESSION_ID:"C6717DCE-CB6A-4BE1-842C-645DE9AEE152",npm_config_fetch_retries:"2",npm_config_registry:"https://registry-node.aliyun.com/org/YscSvypAq7EUU~8GmyAjOp/registry/aliyunIoT/",npm_package_repository_url:"git+http://gitlab.alibaba-inc.com/bone/channel.git",npm_config_versions:"",npm_config_key:"",npm_config_message:"%s",npm_package_readmeFilename:"README.md",npm_package_devDependencies_webpack:"^3.8.1",npm_package_description:"channel为基于mqtt的长连接通信协议封装，可直接使用完整库，也可以单独引用接口层（使用Native SDK时）或实现层（模拟Native SDK bridge）",USER:"NicolasWan",npm_package_devDependencies_esdoc:"^1.0.4",npm_package_license:"ISC",npm_package_devDependencies_esdoc_ecmascript_proposal_plugin:"^1.0.0",npm_config_globalconfig:"/usr/local/etc/npmrc",npm_config_prefer_online:"",npm_config_always_auth:"",npm_config_logs_max:"10",npm_package_devDependencies_babel_loader:"^7.1.2",npm_package_scripts_prepublish:"npm run build",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.yEVutTkC71/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x19:0x34",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",npm_config_global_style:"",npm_config_cache_lock_retries:"10",npm_package_dependencies__bone_event_emitter:"^0.1.4",npm_config_cafile:"",npm_package_author_name:"amos",npm_config_heading:"npm",npm_package_devDependencies_uglifyjs_webpack_plugin:"^1.0.1",YUNOS_SDK_HOME:"/Applications/YunOS-SDK",npm_config_read_only:"",npm_config_offline:"",npm_config_searchlimit:"20",npm_config_fetch_retry_mintimeout:"10000",npm_package_scripts_doc:"esdoc",npm_config_json:"",npm_config_access:"",npm_config_argv:'{"remain":[],"cooked":["run","buildDist"],"original":["run","buildDist"]}',PATH:"/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/lib/node_modules/bnpm/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/NicolasWan/Desktop/Libraries/OSS_Python_API_20160419:/Applications/YunOS-SDK/adb:/Users/NicolasWan/Desktop/Libraries/apache-maven-3.3.9/bin:/Users/NicolasWan/Library/Android/sdk/tools:/Users/NicolasWan/Library/Android/sdk/platform-tools",npm_config_allow_same_version:"",npm_config_https_proxy:"",npm_config_engine_strict:"",npm_config_description:"true",_:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin/webpack",npm_config_init_module:"/Users/NicolasWan/.npm-init.js",npm_config_userconfig:"/Users/NicolasWan/.bonenpmrc",npm_config_cidr:"",PWD:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel",npm_config_user:"",npm_config_node_version:"8.11.1",JAVA_HOME:"/Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home",npm_lifecycle_event:"buildDist",npm_config_ignore_prepublish:"",npm_config_save:"true",npm_config_editor:"vi",npm_config_auth_type:"legacy",npm_package_keywords_0:"mqtt",npm_package_repository_type:"git",npm_package_name:"@bone/channel",LANG:"zh_CN.UTF-8",npm_config_script_shell:"",npm_config_tag:"latest",npm_package_keywords_1:"websocket",npm_config_global:"",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__always_auth:"",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__email:"nbwansjtu@163.com",npm_config_progress:"true",npm_package_scripts_build:"npm run buildLib; npm run buildDist; npm run doc",npm_config_ham_it_up:"",npm_config_searchstaleness:"900",npm_config_optional:"true",XPC_FLAGS:"0x0",npm_config_save_prod:"",npm_config_force:"",npm_config_bin_links:"true",npm_config_searchopts:"",npm_config_node_gyp:"/usr/local/lib/node_modules/bnpm/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_config_depth:"Infinity",npm_package_main:"lib/index.js",npm_config_sso_poll_frequency:"500",npm_config_rebuild_bundle:"true",npm_package_version:"0.1.13",XPC_SERVICE_NAME:"0",npm_config_unicode:"true",SHLVL:"4",HOME:"/Users/NicolasWan",npm_config_fetch_retry_maxtimeout:"60000",npm_package_scripts_test:'echo "Error: no test specified" && exit 1',npm_config_ca:"",npm_config_tag_version_prefix:"v",npm_config_strict_ssl:"true",npm_config_sso_type:"oauth",npm_config_scripts_prepend_node_path:"warn-only",npm_config_save_prefix:"^",npm_config_loglevel:"notice",npm_config_save_exact:"",npm_config_dev:"",npm_config_group:"20",npm_config_fetch_retry_factor:"10",npm_config_version:"",npm_config_prefer_offline:"",npm_config_cache_lock_stale:"60000",npm_config_otp:"",npm_config_cache_min:"10",npm_config_disturl:"https://npm.taobao.org/mirrors/node",npm_package_devDependencies_babel_preset_env:"^1.6.1",npm_package_scripts_buildDist:"webpack --env=prod --progress --profile --colors",npm_config_searchexclude:"",npm_config_cache:"/Users/NicolasWan/.npm",npm_package_devDependencies_babel_cli:"^6.26.0",LOGNAME:"NicolasWan",npm_lifecycle_script:"webpack --env=prod --progress --profile --colors",npm_config_color:"true",npm_config_proxy:"",npm_config_package_lock:"true",npm_config_package_lock_only:"",npm_config_save_optional:"",npm_config_ignore_scripts:"",npm_config_user_agent:"npm/5.7.1 node/v8.11.1 darwin x64",npm_config_cache_lock_wait:"10000",npm_package_dependencies__bone_logger:"^0.1.6",npm_config_production:"",npm_config_send_metrics:"",npm_config_save_bundle:"",npm_config_node_options:"",npm_config_umask:"0022",npm_config_init_version:"1.0.0",npm_package_devDependencies_esdoc_standard_plugin:"^1.0.0",npm_config_init_author_name:"",npm_config_git:"git",npm_config_scope:"",npm_config_onload_script:"",npm_config_unsafe_perm:"true",npm_config_tmp:"/var/folders/5b/rznq7t7j19v207q52brt694h0000gn/T",npm_node_execpath:"/usr/local/bin/node",npm_config_link:"",npm_config_prefix:"/usr/local"}.NODE_ENV&&void 0===n)throw new Error("invariant requires an error message argument");if(!e){var r;if(void 0===n)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=[i,o,t,_,s,c],p=0;(r=new Error(n.replace(/%s/g,function(){return a[p++]}))).name="Invariant Violation"}throw r.framesToPop=1,r}}},function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,n){var i=[],o=!0,t=!1,_=void 0;try{for(var s,c=e[Symbol.iterator]();!(o=(s=c.next()).done)&&(i.push(s.value),!n||i.length!==n);o=!0);}catch(e){t=!0,_=e}finally{try{!o&&c.return&&c.return()}finally{if(t)throw _}}return i}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),t=function(){function e(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,i,o){return i&&e(n.prototype,i),o&&e(n,o),n}}(),_=i(0),s=a(i(1)),c=a(i(2)),r=a(i(9));function a(e){return e&&e.__esModule?e:{default:e}}function p(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var l=Symbol("client"),g=Symbol("options"),m=c.default.create({module:"ChannelWebImpl",label:["Bone","channel"]}),f={development:"ws://channel.iot-as-mqtt.cn-shanghai.aliyuncs.com:8883/",test:"ws://channel.iot-as-mqtt.cn-shanghai.aliyuncs.com:443/",production:"ws://channel.iot-as-mqtt.cn-shanghai.aliyuncs.com:443/"},u=Math.pow(2,64);var d,h,b=(d=navigator.userAgent.toLowerCase(),((h=/(chrome)[ \/](\w+)\./.exec(d)||/(webkit)[ \/]([\w.]+)/.exec(d)||/(opera)(?:.*version|)[ \/](\w+)\./.exec(d)||/(msie) ([\w.]+)/.exec(d)||d.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:(\w+)\.|)/.exec(d)||[])[1]||"unknown")+"_"+(h[2]||"0")),y=function(){function e(n){var i=n.bridge;p(this,e),Object.assign(this,s.default),this.bridge=i}return t(e,[{key:"ready",value:function(e,n){var i=this,t=o(e,1)[0],s=t.id,c=t.token;if(this.client)n(new Error("channel: duplicate ready"));else if("string"==typeof s)if("string"==typeof c){var r=this.env={npm_config_save_dev:"",npm_config_legacy_bundling:"",npm_config_dry_run:"",npm_config_only:"",npm_config_browser:"",npm_config_viewer:"man",npm_config_commit_hooks:"true",npm_package_gitHead:"c79c196dc7cb6f692734c4b9266aeff4be3a9444",npm_config_also:"",npm_package_devDependencies_babel_plugin_transform_class_properties:"^6.24.1",npm_config_rollback:"true",TERM_PROGRAM:"Apple_Terminal",npm_config_usage:"",NODE:"/usr/local/bin/node",INIT_CWD:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel",ANDROID_HOME:"/Users/NicolasWan/Library/Android/sdk",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__username:"nbwansjtu",npm_config_globalignorefile:"/usr/local/etc/npmignore",SHELL:"/bin/bash",TERM:"xterm-256color",npm_config_init_author_url:"",npm_config_shell:"/bin/bash",npm_config_maxsockets:"50",npm_package_dependencies__bone_paho_client:"^0.1.0",npm_config_parseable:"",npm_config_shrinkwrap:"true",npm_config_metrics_registry:"https://registry-node.aliyun.com/org/YscSvypAq7EUU~8GmyAjOp/registry/aliyunIoT/",TMPDIR:"/var/folders/5b/rznq7t7j19v207q52brt694h0000gn/T/",npm_config_timing:"",npm_config_init_license:"ISC",Apple_PubSub_Socket_Render:"/private/tmp/com.apple.launchd.5OioXFWlNU/Render",npm_config_if_present:"",npm_package_devDependencies_babel_core:"^6.26.0",TERM_PROGRAM_VERSION:"400",npm_package_scripts_buildLib:"babel src --out-dir lib",npm_config_sign_git_tag:"",npm_config_init_author_email:"",npm_config_cache_max:"Infinity",npm_config_long:"",npm_config_local_address:"",npm_config_cert:"",npm_config_git_tag_version:"true",TERM_SESSION_ID:"C6717DCE-CB6A-4BE1-842C-645DE9AEE152",npm_config_fetch_retries:"2",npm_config_registry:"https://registry-node.aliyun.com/org/YscSvypAq7EUU~8GmyAjOp/registry/aliyunIoT/",npm_package_repository_url:"git+http://gitlab.alibaba-inc.com/bone/channel.git",npm_config_versions:"",npm_config_key:"",npm_config_message:"%s",npm_package_readmeFilename:"README.md",npm_package_devDependencies_webpack:"^3.8.1",npm_package_description:"channel为基于mqtt的长连接通信协议封装，可直接使用完整库，也可以单独引用接口层（使用Native SDK时）或实现层（模拟Native SDK bridge）",USER:"NicolasWan",npm_package_devDependencies_esdoc:"^1.0.4",npm_package_license:"ISC",npm_package_devDependencies_esdoc_ecmascript_proposal_plugin:"^1.0.0",npm_config_globalconfig:"/usr/local/etc/npmrc",npm_config_prefer_online:"",npm_config_always_auth:"",npm_config_logs_max:"10",npm_package_devDependencies_babel_loader:"^7.1.2",npm_package_scripts_prepublish:"npm run build",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.yEVutTkC71/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x19:0x34",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",npm_config_global_style:"",npm_config_cache_lock_retries:"10",npm_package_dependencies__bone_event_emitter:"^0.1.4",npm_config_cafile:"",npm_package_author_name:"amos",npm_config_heading:"npm",npm_package_devDependencies_uglifyjs_webpack_plugin:"^1.0.1",YUNOS_SDK_HOME:"/Applications/YunOS-SDK",npm_config_read_only:"",npm_config_offline:"",npm_config_searchlimit:"20",npm_config_fetch_retry_mintimeout:"10000",npm_package_scripts_doc:"esdoc",npm_config_json:"",npm_config_access:"",npm_config_argv:'{"remain":[],"cooked":["run","buildDist"],"original":["run","buildDist"]}',PATH:"/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/lib/node_modules/bnpm/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/NicolasWan/Desktop/Libraries/OSS_Python_API_20160419:/Applications/YunOS-SDK/adb:/Users/NicolasWan/Desktop/Libraries/apache-maven-3.3.9/bin:/Users/NicolasWan/Library/Android/sdk/tools:/Users/NicolasWan/Library/Android/sdk/platform-tools",npm_config_allow_same_version:"",npm_config_https_proxy:"",npm_config_engine_strict:"",npm_config_description:"true",_:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin/webpack",npm_config_init_module:"/Users/NicolasWan/.npm-init.js",npm_config_userconfig:"/Users/NicolasWan/.bonenpmrc",npm_config_cidr:"",PWD:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel",npm_config_user:"",npm_config_node_version:"8.11.1",JAVA_HOME:"/Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home",npm_lifecycle_event:"buildDist",npm_config_ignore_prepublish:"",npm_config_save:"true",npm_config_editor:"vi",npm_config_auth_type:"legacy",npm_package_keywords_0:"mqtt",npm_package_repository_type:"git",npm_package_name:"@bone/channel",LANG:"zh_CN.UTF-8",npm_config_script_shell:"",npm_config_tag:"latest",npm_package_keywords_1:"websocket",npm_config_global:"",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__always_auth:"",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__email:"nbwansjtu@163.com",npm_config_progress:"true",npm_package_scripts_build:"npm run buildLib; npm run buildDist; npm run doc",npm_config_ham_it_up:"",npm_config_searchstaleness:"900",npm_config_optional:"true",XPC_FLAGS:"0x0",npm_config_save_prod:"",npm_config_force:"",npm_config_bin_links:"true",npm_config_searchopts:"",npm_config_node_gyp:"/usr/local/lib/node_modules/bnpm/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_config_depth:"Infinity",npm_package_main:"lib/index.js",npm_config_sso_poll_frequency:"500",npm_config_rebuild_bundle:"true",npm_package_version:"0.1.13",XPC_SERVICE_NAME:"0",npm_config_unicode:"true",SHLVL:"4",HOME:"/Users/NicolasWan",npm_config_fetch_retry_maxtimeout:"60000",npm_package_scripts_test:'echo "Error: no test specified" && exit 1',npm_config_ca:"",npm_config_tag_version_prefix:"v",npm_config_strict_ssl:"true",npm_config_sso_type:"oauth",npm_config_scripts_prepend_node_path:"warn-only",npm_config_save_prefix:"^",npm_config_loglevel:"notice",npm_config_save_exact:"",npm_config_dev:"",npm_config_group:"20",npm_config_fetch_retry_factor:"10",npm_config_version:"",npm_config_prefer_offline:"",npm_config_cache_lock_stale:"60000",npm_config_otp:"",npm_config_cache_min:"10",npm_config_disturl:"https://npm.taobao.org/mirrors/node",npm_package_devDependencies_babel_preset_env:"^1.6.1",npm_package_scripts_buildDist:"webpack --env=prod --progress --profile --colors",npm_config_searchexclude:"",npm_config_cache:"/Users/NicolasWan/.npm",npm_package_devDependencies_babel_cli:"^6.26.0",LOGNAME:"NicolasWan",npm_lifecycle_script:"webpack --env=prod --progress --profile --colors",npm_config_color:"true",npm_config_proxy:"",npm_config_package_lock:"true",npm_config_package_lock_only:"",npm_config_save_optional:"",npm_config_ignore_scripts:"",npm_config_user_agent:"npm/5.7.1 node/v8.11.1 darwin x64",npm_config_cache_lock_wait:"10000",npm_package_dependencies__bone_logger:"^0.1.6",npm_config_production:"",npm_config_send_metrics:"",npm_config_save_bundle:"",npm_config_node_options:"",npm_config_umask:"0022",npm_config_init_version:"1.0.0",npm_package_devDependencies_esdoc_standard_plugin:"^1.0.0",npm_config_init_author_name:"",npm_config_git:"git",npm_config_scope:"",npm_config_onload_script:"",npm_config_unsafe_perm:"true",npm_config_tmp:"/var/folders/5b/rznq7t7j19v207q52brt694h0000gn/T",npm_node_execpath:"/usr/local/bin/node",npm_config_link:"",npm_config_prefix:"/usr/local"}&&{npm_config_save_dev:"",npm_config_legacy_bundling:"",npm_config_dry_run:"",npm_config_only:"",npm_config_browser:"",npm_config_viewer:"man",npm_config_commit_hooks:"true",npm_package_gitHead:"c79c196dc7cb6f692734c4b9266aeff4be3a9444",npm_config_also:"",npm_package_devDependencies_babel_plugin_transform_class_properties:"^6.24.1",npm_config_rollback:"true",TERM_PROGRAM:"Apple_Terminal",npm_config_usage:"",NODE:"/usr/local/bin/node",INIT_CWD:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel",ANDROID_HOME:"/Users/NicolasWan/Library/Android/sdk",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__username:"nbwansjtu",npm_config_globalignorefile:"/usr/local/etc/npmignore",SHELL:"/bin/bash",TERM:"xterm-256color",npm_config_init_author_url:"",npm_config_shell:"/bin/bash",npm_config_maxsockets:"50",npm_package_dependencies__bone_paho_client:"^0.1.0",npm_config_parseable:"",npm_config_shrinkwrap:"true",npm_config_metrics_registry:"https://registry-node.aliyun.com/org/YscSvypAq7EUU~8GmyAjOp/registry/aliyunIoT/",TMPDIR:"/var/folders/5b/rznq7t7j19v207q52brt694h0000gn/T/",npm_config_timing:"",npm_config_init_license:"ISC",Apple_PubSub_Socket_Render:"/private/tmp/com.apple.launchd.5OioXFWlNU/Render",npm_config_if_present:"",npm_package_devDependencies_babel_core:"^6.26.0",TERM_PROGRAM_VERSION:"400",npm_package_scripts_buildLib:"babel src --out-dir lib",npm_config_sign_git_tag:"",npm_config_init_author_email:"",npm_config_cache_max:"Infinity",npm_config_long:"",npm_config_local_address:"",npm_config_cert:"",npm_config_git_tag_version:"true",TERM_SESSION_ID:"C6717DCE-CB6A-4BE1-842C-645DE9AEE152",npm_config_fetch_retries:"2",npm_config_registry:"https://registry-node.aliyun.com/org/YscSvypAq7EUU~8GmyAjOp/registry/aliyunIoT/",npm_package_repository_url:"git+http://gitlab.alibaba-inc.com/bone/channel.git",npm_config_versions:"",npm_config_key:"",npm_config_message:"%s",npm_package_readmeFilename:"README.md",npm_package_devDependencies_webpack:"^3.8.1",npm_package_description:"channel为基于mqtt的长连接通信协议封装，可直接使用完整库，也可以单独引用接口层（使用Native SDK时）或实现层（模拟Native SDK bridge）",USER:"NicolasWan",npm_package_devDependencies_esdoc:"^1.0.4",npm_package_license:"ISC",npm_package_devDependencies_esdoc_ecmascript_proposal_plugin:"^1.0.0",npm_config_globalconfig:"/usr/local/etc/npmrc",npm_config_prefer_online:"",npm_config_always_auth:"",npm_config_logs_max:"10",npm_package_devDependencies_babel_loader:"^7.1.2",npm_package_scripts_prepublish:"npm run build",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.yEVutTkC71/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x19:0x34",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",npm_config_global_style:"",npm_config_cache_lock_retries:"10",npm_package_dependencies__bone_event_emitter:"^0.1.4",npm_config_cafile:"",npm_package_author_name:"amos",npm_config_heading:"npm",npm_package_devDependencies_uglifyjs_webpack_plugin:"^1.0.1",YUNOS_SDK_HOME:"/Applications/YunOS-SDK",npm_config_read_only:"",npm_config_offline:"",npm_config_searchlimit:"20",npm_config_fetch_retry_mintimeout:"10000",npm_package_scripts_doc:"esdoc",npm_config_json:"",npm_config_access:"",npm_config_argv:'{"remain":[],"cooked":["run","buildDist"],"original":["run","buildDist"]}',PATH:"/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/lib/node_modules/bnpm/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/NicolasWan/Desktop/Libraries/OSS_Python_API_20160419:/Applications/YunOS-SDK/adb:/Users/NicolasWan/Desktop/Libraries/apache-maven-3.3.9/bin:/Users/NicolasWan/Library/Android/sdk/tools:/Users/NicolasWan/Library/Android/sdk/platform-tools",npm_config_allow_same_version:"",npm_config_https_proxy:"",npm_config_engine_strict:"",npm_config_description:"true",_:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin/webpack",npm_config_init_module:"/Users/NicolasWan/.npm-init.js",npm_config_userconfig:"/Users/NicolasWan/.bonenpmrc",npm_config_cidr:"",PWD:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel",npm_config_user:"",npm_config_node_version:"8.11.1",JAVA_HOME:"/Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home",npm_lifecycle_event:"buildDist",npm_config_ignore_prepublish:"",npm_config_save:"true",npm_config_editor:"vi",npm_config_auth_type:"legacy",npm_package_keywords_0:"mqtt",npm_package_repository_type:"git",npm_package_name:"@bone/channel",LANG:"zh_CN.UTF-8",npm_config_script_shell:"",npm_config_tag:"latest",npm_package_keywords_1:"websocket",npm_config_global:"",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__always_auth:"",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__email:"nbwansjtu@163.com",npm_config_progress:"true",npm_package_scripts_build:"npm run buildLib; npm run buildDist; npm run doc",npm_config_ham_it_up:"",npm_config_searchstaleness:"900",npm_config_optional:"true",XPC_FLAGS:"0x0",npm_config_save_prod:"",npm_config_force:"",npm_config_bin_links:"true",npm_config_searchopts:"",npm_config_node_gyp:"/usr/local/lib/node_modules/bnpm/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_config_depth:"Infinity",npm_package_main:"lib/index.js",npm_config_sso_poll_frequency:"500",npm_config_rebuild_bundle:"true",npm_package_version:"0.1.13",XPC_SERVICE_NAME:"0",npm_config_unicode:"true",SHLVL:"4",HOME:"/Users/NicolasWan",npm_config_fetch_retry_maxtimeout:"60000",npm_package_scripts_test:'echo "Error: no test specified" && exit 1',npm_config_ca:"",npm_config_tag_version_prefix:"v",npm_config_strict_ssl:"true",npm_config_sso_type:"oauth",npm_config_scripts_prepend_node_path:"warn-only",npm_config_save_prefix:"^",npm_config_loglevel:"notice",npm_config_save_exact:"",npm_config_dev:"",npm_config_group:"20",npm_config_fetch_retry_factor:"10",npm_config_version:"",npm_config_prefer_offline:"",npm_config_cache_lock_stale:"60000",npm_config_otp:"",npm_config_cache_min:"10",npm_config_disturl:"https://npm.taobao.org/mirrors/node",npm_package_devDependencies_babel_preset_env:"^1.6.1",npm_package_scripts_buildDist:"webpack --env=prod --progress --profile --colors",npm_config_searchexclude:"",npm_config_cache:"/Users/NicolasWan/.npm",npm_package_devDependencies_babel_cli:"^6.26.0",LOGNAME:"NicolasWan",npm_lifecycle_script:"webpack --env=prod --progress --profile --colors",npm_config_color:"true",npm_config_proxy:"",npm_config_package_lock:"true",npm_config_package_lock_only:"",npm_config_save_optional:"",npm_config_ignore_scripts:"",npm_config_user_agent:"npm/5.7.1 node/v8.11.1 darwin x64",npm_config_cache_lock_wait:"10000",npm_package_dependencies__bone_logger:"^0.1.6",npm_config_production:"",npm_config_send_metrics:"",npm_config_save_bundle:"",npm_config_node_options:"",npm_config_umask:"0022",npm_config_init_version:"1.0.0",npm_package_devDependencies_esdoc_standard_plugin:"^1.0.0",npm_config_init_author_name:"",npm_config_git:"git",npm_config_scope:"",npm_config_onload_script:"",npm_config_unsafe_perm:"true",npm_config_tmp:"/var/folders/5b/rznq7t7j19v207q52brt694h0000gn/T",npm_node_execpath:"/usr/local/bin/node",npm_config_link:"",npm_config_prefix:"/usr/local"}.NODE_ENV?{npm_config_save_dev:"",npm_config_legacy_bundling:"",npm_config_dry_run:"",npm_config_only:"",npm_config_browser:"",npm_config_viewer:"man",npm_config_commit_hooks:"true",npm_package_gitHead:"c79c196dc7cb6f692734c4b9266aeff4be3a9444",npm_config_also:"",npm_package_devDependencies_babel_plugin_transform_class_properties:"^6.24.1",npm_config_rollback:"true",TERM_PROGRAM:"Apple_Terminal",npm_config_usage:"",NODE:"/usr/local/bin/node",INIT_CWD:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel",ANDROID_HOME:"/Users/NicolasWan/Library/Android/sdk",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__username:"nbwansjtu",npm_config_globalignorefile:"/usr/local/etc/npmignore",SHELL:"/bin/bash",TERM:"xterm-256color",npm_config_init_author_url:"",npm_config_shell:"/bin/bash",npm_config_maxsockets:"50",npm_package_dependencies__bone_paho_client:"^0.1.0",npm_config_parseable:"",npm_config_shrinkwrap:"true",npm_config_metrics_registry:"https://registry-node.aliyun.com/org/YscSvypAq7EUU~8GmyAjOp/registry/aliyunIoT/",TMPDIR:"/var/folders/5b/rznq7t7j19v207q52brt694h0000gn/T/",npm_config_timing:"",npm_config_init_license:"ISC",Apple_PubSub_Socket_Render:"/private/tmp/com.apple.launchd.5OioXFWlNU/Render",npm_config_if_present:"",npm_package_devDependencies_babel_core:"^6.26.0",TERM_PROGRAM_VERSION:"400",npm_package_scripts_buildLib:"babel src --out-dir lib",npm_config_sign_git_tag:"",npm_config_init_author_email:"",npm_config_cache_max:"Infinity",npm_config_long:"",npm_config_local_address:"",npm_config_cert:"",npm_config_git_tag_version:"true",TERM_SESSION_ID:"C6717DCE-CB6A-4BE1-842C-645DE9AEE152",npm_config_fetch_retries:"2",npm_config_registry:"https://registry-node.aliyun.com/org/YscSvypAq7EUU~8GmyAjOp/registry/aliyunIoT/",npm_package_repository_url:"git+http://gitlab.alibaba-inc.com/bone/channel.git",npm_config_versions:"",npm_config_key:"",npm_config_message:"%s",npm_package_readmeFilename:"README.md",npm_package_devDependencies_webpack:"^3.8.1",npm_package_description:"channel为基于mqtt的长连接通信协议封装，可直接使用完整库，也可以单独引用接口层（使用Native SDK时）或实现层（模拟Native SDK bridge）",USER:"NicolasWan",npm_package_devDependencies_esdoc:"^1.0.4",npm_package_license:"ISC",npm_package_devDependencies_esdoc_ecmascript_proposal_plugin:"^1.0.0",npm_config_globalconfig:"/usr/local/etc/npmrc",npm_config_prefer_online:"",npm_config_always_auth:"",npm_config_logs_max:"10",npm_package_devDependencies_babel_loader:"^7.1.2",npm_package_scripts_prepublish:"npm run build",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.yEVutTkC71/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x19:0x34",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",npm_config_global_style:"",npm_config_cache_lock_retries:"10",npm_package_dependencies__bone_event_emitter:"^0.1.4",npm_config_cafile:"",npm_package_author_name:"amos",npm_config_heading:"npm",npm_package_devDependencies_uglifyjs_webpack_plugin:"^1.0.1",YUNOS_SDK_HOME:"/Applications/YunOS-SDK",npm_config_read_only:"",npm_config_offline:"",npm_config_searchlimit:"20",npm_config_fetch_retry_mintimeout:"10000",npm_package_scripts_doc:"esdoc",npm_config_json:"",npm_config_access:"",npm_config_argv:'{"remain":[],"cooked":["run","buildDist"],"original":["run","buildDist"]}',PATH:"/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/lib/node_modules/bnpm/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/NicolasWan/Desktop/Libraries/OSS_Python_API_20160419:/Applications/YunOS-SDK/adb:/Users/NicolasWan/Desktop/Libraries/apache-maven-3.3.9/bin:/Users/NicolasWan/Library/Android/sdk/tools:/Users/NicolasWan/Library/Android/sdk/platform-tools",npm_config_allow_same_version:"",npm_config_https_proxy:"",npm_config_engine_strict:"",npm_config_description:"true",_:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel/node_modules/.bin/webpack",npm_config_init_module:"/Users/NicolasWan/.npm-init.js",npm_config_userconfig:"/Users/NicolasWan/.bonenpmrc",npm_config_cidr:"",PWD:"/Users/NicolasWan/Desktop/WorkSpace/JavaScript/aliplus/bone/channel",npm_config_user:"",npm_config_node_version:"8.11.1",JAVA_HOME:"/Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home",npm_lifecycle_event:"buildDist",npm_config_ignore_prepublish:"",npm_config_save:"true",npm_config_editor:"vi",npm_config_auth_type:"legacy",npm_package_keywords_0:"mqtt",npm_package_repository_type:"git",npm_package_name:"@bone/channel",LANG:"zh_CN.UTF-8",npm_config_script_shell:"",npm_config_tag:"latest",npm_package_keywords_1:"websocket",npm_config_global:"",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__always_auth:"",npm_config___registry_node_aliyun_com_org_YscSvypAq7EUU_8GmyAjOp_registry_aliyunIoT__email:"nbwansjtu@163.com",npm_config_progress:"true",npm_package_scripts_build:"npm run buildLib; npm run buildDist; npm run doc",npm_config_ham_it_up:"",npm_config_searchstaleness:"900",npm_config_optional:"true",XPC_FLAGS:"0x0",npm_config_save_prod:"",npm_config_force:"",npm_config_bin_links:"true",npm_config_searchopts:"",npm_config_node_gyp:"/usr/local/lib/node_modules/bnpm/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_config_depth:"Infinity",npm_package_main:"lib/index.js",npm_config_sso_poll_frequency:"500",npm_config_rebuild_bundle:"true",npm_package_version:"0.1.13",XPC_SERVICE_NAME:"0",npm_config_unicode:"true",SHLVL:"4",HOME:"/Users/NicolasWan",npm_config_fetch_retry_maxtimeout:"60000",npm_package_scripts_test:'echo "Error: no test specified" && exit 1',npm_config_ca:"",npm_config_tag_version_prefix:"v",npm_config_strict_ssl:"true",npm_config_sso_type:"oauth",npm_config_scripts_prepend_node_path:"warn-only",npm_config_save_prefix:"^",npm_config_loglevel:"notice",npm_config_save_exact:"",npm_config_dev:"",npm_config_group:"20",npm_config_fetch_retry_factor:"10",npm_config_version:"",npm_config_prefer_offline:"",npm_config_cache_lock_stale:"60000",npm_config_otp:"",npm_config_cache_min:"10",npm_config_disturl:"https://npm.taobao.org/mirrors/node",npm_package_devDependencies_babel_preset_env:"^1.6.1",npm_package_scripts_buildDist:"webpack --env=prod --progress --profile --colors",npm_config_searchexclude:"",npm_config_cache:"/Users/NicolasWan/.npm",npm_package_devDependencies_babel_cli:"^6.26.0",LOGNAME:"NicolasWan",npm_lifecycle_script:"webpack --env=prod --progress --profile --colors",npm_config_color:"true",npm_config_proxy:"",npm_config_package_lock:"true",npm_config_package_lock_only:"",npm_config_save_optional:"",npm_config_ignore_scripts:"",npm_config_user_agent:"npm/5.7.1 node/v8.11.1 darwin x64",npm_config_cache_lock_wait:"10000",npm_package_dependencies__bone_logger:"^0.1.6",npm_config_production:"",npm_config_send_metrics:"",npm_config_save_bundle:"",npm_config_node_options:"",npm_config_umask:"0022",npm_config_init_version:"1.0.0",npm_package_devDependencies_esdoc_standard_plugin:"^1.0.0",npm_config_init_author_name:"",npm_config_git:"git",npm_config_scope:"",npm_config_onload_script:"",npm_config_unsafe_perm:"true",npm_config_tmp:"/var/folders/5b/rznq7t7j19v207q52brt694h0000gn/T",npm_node_execpath:"/usr/local/bin/node",npm_config_link:"",npm_config_prefix:"/usr/local"}.NODE_ENV:"production",a=this.host=f[r];m.debug("ready: id="+s+", token="+c+", env="+r+", host="+a);var p=Math.floor(Math.random()*u),l=s+"_"+p+"&"+b,g={host:f[r],clientId:l,mqttClientId:l+"|securemode=2,authtype=sepauth|",mqttUsername:l,mqttPassword:c,topicPrefix:"/sys/"+b+"/"+s+"_"+p+"/web/"};m.debug("ready: create client",g);var d=this.client=new v(g);d.on(_.CHANNEL_CONNECT_STATUS_CHANGE,function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];i.emit.apply(i,[_.CHANNEL_CONNECT_STATUS_CHANGE].concat(n))}).connect().then(function(){m.debug("ready: connected"),d._subscribeDefaultTopic(function(e){if(e)return m.warn("ready: subscribe default topic failed",e),void n(e);m.debug("ready: subscribe default topic success"),n(null)})}.bind(this),h.bind(this)).catch(h.bind(this))}else n(new Error("channel: token is required"));else n(new Error("channel: id is required"));function h(e){m.warn("ready: connect failed",e),n(e)}}},{key:"subscribe",value:function(e,n){var i=o(e,1)[0];this.client.on(i,n)}},{key:"unsubscribe",value:function(e,n){var i=o(e,1)[0];this.client.off(i,n)}},{key:"publish",value:function(e,n){var i=o(e,2),t=i[0],_=i[1];this.client.publish([t,_],n)}},{key:"request",value:function(e,n){var i=o(e,2),t=i[0],_=i[1];this.client.request([t,_],n)}}]),e}();y.moduleName=_.CHANNEL;var v=function(){function e(n){var i=n.host,o=n.clientId,t=n.mqttClientId,_=n.mqttUsername,c=n.mqttPassword,a=n.topicPrefix;p(this,e),m.debug("client.constructor in:",{host:i,clientId:o,mqttClientId:t,mqttUsername:_,mqttPassword:c,topicPrefix:a}),Object.assign(this,s.default);var f=this[l]=new r.default.Client(i,t);m.debug("client.constructor: client created",f),this[g]={host:i,clientId:o,mqttClientId:t,mqttUsername:_,mqttPassword:c,topicPrefix:a},f.onMessageArrived=this._onMessageArrived.bind(this),f.onMessageDelivered=this._onMessageDelivered.bind(this),f.onConnected=this._onConnected.bind(this),f.onConnectionLost=this._onConnectionLost.bind(this)}return t(e,[{key:"client",get:function(){return this[l]}},{key:"host",get:function(){return this[g].host}},{key:"clientId",get:function(){return this[g].clientId}},{key:"mqttClientId",get:function(){return this[g].mqttClientId}},{key:"mqttUsername",get:function(){return this[g].mqttUsername}},{key:"mqttPassword",get:function(){return this[g].mqttPassword}},{key:"topicPrefix",get:function(){return this[g].topicPrefix}}]),t(e,[{key:"connect",value:function(){var e=this;return m.debug("client.connect: connecting client"),new Promise(function(n,i){var o={useSSL:!0,userName:e.mqttUsername,password:e.mqttPassword,reconnect:!0,onSuccess:n,onFailure:i};m.debug("client.connect options:",o),e.client.connect(o)})}},{key:"_subscribeDefaultTopic",value:function(e){var n=this;m.debug("client._subscribeDefaultTopic: "+this.topicPrefix+"down/#"),this.client.subscribe(this.topicPrefix+"down/#",{qos:0,onSuccess:function(){m.debug("client.connect: default topic '"+n.topicPrefix+"down/#' subscribed"),e(null)},onFailure:function(i){m.warn("client.connect: default topic '"+n.topicPrefix+"down/#' subscribed failed"),e(i)}})}},{key:"_onMessageArrived",value:function(e){m.debug("client message received:",e);var n=e.destinationName.replace(/^\/sys\/[^\/]+\/[^\/]+\/web\/down/,""),i={topic:n};try{i.payload=JSON.parse(e.payloadString)}catch(e){return void m.error("client message parse error:",e.message)}this.emit(n,i)}},{key:"_onMessageDelivered",value:function(e){m.debug("client message delivered:",e);var n="_ON_MESSAGE_DELIVERED_"+e.destinationName.replace(/^\/sys\/[^\/]+\/[^\/]+\/web\/up/,"");this.emit(n,e)}},{key:"_onConnected",value:function(){this.emit(_.CHANNEL_CONNECT_STATUS_CHANGE,_.CHANNEL_CONNECT_STATUS_CONNECTED)}},{key:"_onConnectionLost",value:function(e){m.warn("client connection lost:",e),this.emit(_.CHANNEL_CONNECT_STATUS_CHANGE,_.CHANNEL_CONNECT_STATUS_DISCONNECTED,e)}},{key:"publish",value:function(e,n){var i=o(e,4),t=i[0],_=i[1],s=i[2],c=void 0===s?0:s,r=i[3],a=void 0===r||r;m.debug("client.publish:",this.topicPrefix+"up"+t,_,c,a);try{"object"==typeof _&&(_=JSON.stringify(_))}catch(e){return m.warn("client.publish error:",e),void n(e)}"function"==typeof n&&this.one("_ON_MESSAGE_DELIVERED_"+t,function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];n.apply(void 0,[null].concat(i))}),this.client.publish(this.topicPrefix+"up"+t,_,c,a)}},{key:"request",value:function(e,n){var i=this,t=o(e,4),_=t[0],s=t[1],c=t[2],r=void 0===c?0:c,a=t[3],p=void 0===a||a;m.debug("client.request:",this.topicPrefix+"up"+_,s,r,p),this.publish([_,s],function(e){e?n(e):"function"==typeof n&&i.one(_+"_reply",function(e){n(null,e)})})}}]),e}();n.default=y},function(e,n,i){"use strict";var o;o=function(){var e={},n=function(n){var i={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},o=function(e,n){for(var i in e)if(e.hasOwnProperty(i)){if(!n.hasOwnProperty(i)){var o="Unknown property, "+i+". Valid properties are:";for(var t in n)n.hasOwnProperty(t)&&(o=o+" "+t);throw new Error(o)}if(typeof e[i]!==n[i])throw new Error(c(_.INVALID_TYPE,[typeof e[i],i]))}},t=function(e,n){return function(){return e.apply(n,arguments)}},_={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},s={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},c=function(e,n){var i=e.text;if(n)for(var o,t,_=0;_<n.length;_++)if(o="{"+_+"}",(t=i.indexOf(o))>0){var s=i.substring(0,t),c=i.substring(t+o.length);i=s+n[_]+c}return i},r=[0,6,77,81,73,115,100,112,3],a=[0,4,77,81,84,84,4],p=function(e,n){for(var i in this.type=e,n)n.hasOwnProperty(i)&&(this[i]=n[i])};function l(n,o){var t,_=o,s=n[o],c=s>>4,r=s&=15;o+=1;var a=0,l=1;do{if(o==n.length)return[null,_];a+=(127&(t=n[o++]))*l,l*=128}while(0!=(128&t));var g=o+a;if(g>n.length)return[null,_];var m=new p(c);switch(c){case i.CONNACK:1&n[o++]&&(m.sessionPresent=!0),m.returnCode=n[o++];break;case i.PUBLISH:var u=r>>1&3,d=f(n,o),b=h(n,o+=2,d);o+=d,u>0&&(m.messageIdentifier=f(n,o),o+=2);var y=new e.MQTT.Message(n.subarray(o,g));1==(1&r)&&(y.retained=!0),8==(8&r)&&(y.duplicate=!0),y.qos=u,y.destinationName=b,m.payloadMessage=y;break;case i.PUBACK:case i.PUBREC:case i.PUBREL:case i.PUBCOMP:case i.UNSUBACK:m.messageIdentifier=f(n,o);break;case i.SUBACK:m.messageIdentifier=f(n,o),o+=2,m.returnCode=n.subarray(o,g)}return[m,g]}function g(e,n,i){return n[i++]=e>>8,n[i++]=e%256,i}function m(e,n,i,o){return d(e,i,o=g(n,i,o)),o+n}function f(e,n){return 256*e[n]+e[n+1]}function u(e){for(var n=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);o>2047?(55296<=o&&o<=56319&&(i++,n++),n+=3):o>127?n+=2:n++}return n}function d(e,n,i){for(var o=i,t=0;t<e.length;t++){var s=e.charCodeAt(t);if(55296<=s&&s<=56319){var r=e.charCodeAt(++t);if(isNaN(r))throw new Error(c(_.MALFORMED_UNICODE,[s,r]));s=r-56320+(s-55296<<10)+65536}s<=127?n[o++]=s:s<=2047?(n[o++]=s>>6&31|192,n[o++]=63&s|128):s<=65535?(n[o++]=s>>12&15|224,n[o++]=s>>6&63|128,n[o++]=63&s|128):(n[o++]=s>>18&7|240,n[o++]=s>>12&63|128,n[o++]=s>>6&63|128,n[o++]=63&s|128)}return n}function h(e,n,i){for(var o,t="",s=n;s<n+i;){var r=e[s++];if(r<128)o=r;else{var a=e[s++]-128;if(a<0)throw new Error(c(_.MALFORMED_UTF,[r.toString(16),a.toString(16),""]));if(r<224)o=64*(r-192)+a;else{var p=e[s++]-128;if(p<0)throw new Error(c(_.MALFORMED_UTF,[r.toString(16),a.toString(16),p.toString(16)]));if(r<240)o=4096*(r-224)+64*a+p;else{var l=e[s++]-128;if(l<0)throw new Error(c(_.MALFORMED_UTF,[r.toString(16),a.toString(16),p.toString(16),l.toString(16)]));if(!(r<248))throw new Error(c(_.MALFORMED_UTF,[r.toString(16),a.toString(16),p.toString(16),l.toString(16)]));o=262144*(r-240)+4096*a+64*p+l}}}o>65535&&(o-=65536,t+=String.fromCharCode(55296+(o>>10)),o=56320+(1023&o)),t+=String.fromCharCode(o)}return t}p.prototype.encode=function(){var e,n=(15&this.type)<<4,o=0,t=[],_=0;switch(void 0!==this.messageIdentifier&&(o+=2),this.type){case i.CONNECT:switch(this.mqttVersion){case 3:o+=r.length+3;break;case 4:o+=a.length+3}o+=u(this.clientId)+2,void 0!==this.willMessage&&(o+=u(this.willMessage.destinationName)+2,(e=this.willMessage.payloadBytes)instanceof Uint8Array||(e=new Uint8Array(c)),o+=e.byteLength+2),void 0!==this.userName&&(o+=u(this.userName)+2),void 0!==this.password&&(o+=u(this.password)+2);break;case i.SUBSCRIBE:n|=2;for(var s=0;s<this.topics.length;s++)t[s]=u(this.topics[s]),o+=t[s]+2;o+=this.requestedQos.length;break;case i.UNSUBSCRIBE:n|=2;for(s=0;s<this.topics.length;s++)t[s]=u(this.topics[s]),o+=t[s]+2;break;case i.PUBREL:n|=2;break;case i.PUBLISH:this.payloadMessage.duplicate&&(n|=8),n=n|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(n|=1),o+=(_=u(this.payloadMessage.destinationName))+2;var c=this.payloadMessage.payloadBytes;o+=c.byteLength,c instanceof ArrayBuffer?c=new Uint8Array(c):c instanceof Uint8Array||(c=new Uint8Array(c.buffer));break;case i.DISCONNECT:}var p=function(e){var n=new Array(1),i=0;do{var o=e%128;(e>>=7)>0&&(o|=128),n[i++]=o}while(e>0&&i<4);return n}(o),l=p.length+1,f=new ArrayBuffer(o+l),d=new Uint8Array(f);if(d[0]=n,d.set(p,1),this.type==i.PUBLISH)l=m(this.payloadMessage.destinationName,_,d,l);else if(this.type==i.CONNECT){switch(this.mqttVersion){case 3:d.set(r,l),l+=r.length;break;case 4:d.set(a,l),l+=a.length}var h=0;this.cleanSession&&(h=2),void 0!==this.willMessage&&(h|=4,h|=this.willMessage.qos<<3,this.willMessage.retained&&(h|=32)),void 0!==this.userName&&(h|=128),void 0!==this.password&&(h|=64),d[l++]=h,l=g(this.keepAliveInterval,d,l)}switch(void 0!==this.messageIdentifier&&(l=g(this.messageIdentifier,d,l)),this.type){case i.CONNECT:l=m(this.clientId,u(this.clientId),d,l),void 0!==this.willMessage&&(l=m(this.willMessage.destinationName,u(this.willMessage.destinationName),d,l),l=g(e.byteLength,d,l),d.set(e,l),l+=e.byteLength),void 0!==this.userName&&(l=m(this.userName,u(this.userName),d,l)),void 0!==this.password&&(l=m(this.password,u(this.password),d,l));break;case i.PUBLISH:d.set(c,l);break;case i.SUBSCRIBE:for(s=0;s<this.topics.length;s++)l=m(this.topics[s],t[s],d,l),d[l++]=this.requestedQos[s];break;case i.UNSUBSCRIBE:for(s=0;s<this.topics.length;s++)l=m(this.topics[s],t[s],d,l)}return f};var b=function(e,n,o){this._client=e,this._window=n,this._keepAliveInterval=1e3*o,this.isReset=!1;var t=new p(i.PINGREQ).encode(),s=function(e){return function(){return r.apply(e)}},r=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(t),this.timeout=this._window.setTimeout(s(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(_.PING_TIMEOUT.code,c(_.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,this._window.clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(s(this),this._keepAliveInterval))},this.cancel=function(){this._window.clearTimeout(this.timeout)}},y=function(e,n,i,o,t){this._window=n,i||(i=30);this.timeout=setTimeout(function(e,n,i){return function(){return e.apply(n,i)}}(o,e,t),1e3*i),this.cancel=function(){this._window.clearTimeout(this.timeout)}},v=function(e,i,o,t,s){if(!("WebSocket"in n&&null!==n.WebSocket))throw new Error(c(_.UNSUPPORTED,["WebSocket"]));if(!("localStorage"in n&&null!==n.localStorage))throw new Error(c(_.UNSUPPORTED,["localStorage"]));if(!("ArrayBuffer"in n&&null!==n.ArrayBuffer))throw new Error(c(_.UNSUPPORTED,["ArrayBuffer"]));for(var r in this._trace("Paho.MQTT.Client",e,i,o,t,s),this.host=i,this.port=o,this.path=t,this.uri=e,this.clientId=s,this._wsuri=null,this._localKey=i+":"+o+("/mqtt"!=t?":"+t:"")+":"+s+":",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,localStorage)0!==r.indexOf("Sent:"+this._localKey)&&0!==r.indexOf("Received:"+this._localKey)||this.restore(r)};v.prototype.host=null,v.prototype.port=null,v.prototype.path=null,v.prototype.uri=null,v.prototype.clientId=null,v.prototype.socket=null,v.prototype.connected=!1,v.prototype.maxMessageIdentifier=65536,v.prototype.connectOptions=null,v.prototype.hostIndex=null,v.prototype.onConnected=null,v.prototype.onConnectionLost=null,v.prototype.onMessageDelivered=null,v.prototype.onMessageArrived=null,v.prototype.traceFunction=null,v.prototype._msg_queue=null,v.prototype._buffered_msg_queue=null,v.prototype._connectTimeout=null,v.prototype.sendPinger=null,v.prototype.receivePinger=null,v.prototype._reconnectInterval=1,v.prototype._reconnecting=!1,v.prototype._reconnectTimeout=null,v.prototype.disconnectedPublishing=!1,v.prototype.disconnectedBufferSize=5e3,v.prototype.receiveBuffer=null,v.prototype._traceBuffer=null,v.prototype._MAX_TRACE_ENTRIES=100,v.prototype.connect=function(e){var n=this._traceMask(e,"password");if(this._trace("Client.connect",n,this.socket,this.connected),this.connected)throw new Error(c(_.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(c(_.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=e,this._reconnectInterval=1,this._reconnecting=!1,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},v.prototype.subscribe=function(e,n){if(this._trace("Client.subscribe",e,n),!this.connected)throw new Error(c(_.INVALID_STATE,["not connected"]));var o=new p(i.SUBSCRIBE);o.topics=[e],void 0!==n.qos?o.requestedQos=[n.qos]:o.requestedQos=[0],n.onSuccess&&(o.onSuccess=function(e){n.onSuccess({invocationContext:n.invocationContext,grantedQos:e})}),n.onFailure&&(o.onFailure=function(e){n.onFailure({invocationContext:n.invocationContext,errorCode:e,errorMessage:c(e)})}),n.timeout&&(o.timeOut=new y(this,window,n.timeout,n.onFailure,[{invocationContext:n.invocationContext,errorCode:_.SUBSCRIBE_TIMEOUT.code,errorMessage:c(_.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(o),this._schedule_message(o)},v.prototype.unsubscribe=function(e,n){if(this._trace("Client.unsubscribe",e,n),!this.connected)throw new Error(c(_.INVALID_STATE,["not connected"]));var o=new p(i.UNSUBSCRIBE);o.topics=[e],n.onSuccess&&(o.callback=function(){n.onSuccess({invocationContext:n.invocationContext})}),n.timeout&&(o.timeOut=new y(this,window,n.timeout,n.onFailure,[{invocationContext:n.invocationContext,errorCode:_.UNSUBSCRIBE_TIMEOUT.code,errorMessage:c(_.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(o),this._schedule_message(o)},v.prototype.send=function(e){this._trace("Client.send",e);var n=new p(i.PUBLISH);if(n.payloadMessage=e,this.connected)e.qos>0?this._requires_ack(n):this.onMessageDelivered&&(this._notify_msg_sent[n]=this.onMessageDelivered(n.payloadMessage)),this._schedule_message(n);else{if(!this._reconnecting||!this.disconnectedPublishing)throw new Error(c(_.INVALID_STATE,["not connected"]));if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw new Error(c(_.BUFFER_FULL,[this.disconnectedBufferSize]));e.qos>0?this._requires_ack(n):(n.sequence=++this._sequence,this._buffered_msg_queue.push(n))}},v.prototype.disconnect=function(){if(this._trace("Client.disconnect"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.socket)throw new Error(c(_.INVALID_STATE,["not connecting or connected"]));var e=new p(i.DISCONNECT);this._notify_msg_sent[e]=t(this._disconnected,this),this._schedule_message(e)},v.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var e in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},v.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@")},v.prototype.stopTrace=function(){delete this._traceBuffer},v.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var n=e.split(":");n[0]="wss",e=n.join(":")}this._wsuri=e,this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=t(this._on_socket_open,this),this.socket.onmessage=t(this._on_socket_message,this),this.socket.onerror=t(this._on_socket_error,this),this.socket.onclose=t(this._on_socket_close,this),this.sendPinger=new b(this,window,this.connectOptions.keepAliveInterval),this.receivePinger=new b(this,window,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new y(this,window,this.connectOptions.timeout,this._disconnected,[_.CONNECT_TIMEOUT.code,c(_.CONNECT_TIMEOUT)])},v.prototype._schedule_message=function(e){this._msg_queue.push(e),this.connected&&this._process_queue()},v.prototype.store=function(e,n){var o={type:n.type,messageIdentifier:n.messageIdentifier,version:1};switch(n.type){case i.PUBLISH:n.pubRecReceived&&(o.pubRecReceived=!0),o.payloadMessage={};for(var t="",s=n.payloadMessage.payloadBytes,r=0;r<s.length;r++)s[r]<=15?t=t+"0"+s[r].toString(16):t+=s[r].toString(16);o.payloadMessage.payloadHex=t,o.payloadMessage.qos=n.payloadMessage.qos,o.payloadMessage.destinationName=n.payloadMessage.destinationName,n.payloadMessage.duplicate&&(o.payloadMessage.duplicate=!0),n.payloadMessage.retained&&(o.payloadMessage.retained=!0),0===e.indexOf("Sent:")&&(void 0===n.sequence&&(n.sequence=++this._sequence),o.sequence=n.sequence);break;default:throw Error(c(_.INVALID_STORED_DATA,[key,o]))}localStorage.setItem(e+this._localKey+n.messageIdentifier,JSON.stringify(o))},v.prototype.restore=function(n){var o=localStorage.getItem(n),t=JSON.parse(o),s=new p(t.type,t);switch(t.type){case i.PUBLISH:for(var r=t.payloadMessage.payloadHex,a=new ArrayBuffer(r.length/2),l=new Uint8Array(a),g=0;r.length>=2;){var m=parseInt(r.substring(0,2),16);r=r.substring(2,r.length),l[g++]=m}var f=new e.MQTT.Message(l);f.qos=t.payloadMessage.qos,f.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(f.duplicate=!0),t.payloadMessage.retained&&(f.retained=!0),s.payloadMessage=f;break;default:throw Error(c(_.INVALID_STORED_DATA,[n,o]))}0===n.indexOf("Sent:"+this._localKey)?(s.payloadMessage.duplicate=!0,this._sentMessages[s.messageIdentifier]=s):0===n.indexOf("Received:"+this._localKey)&&(this._receivedMessages[s.messageIdentifier]=s)},v.prototype._process_queue=function(){for(var e=null,n=this._msg_queue.reverse();e=n.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},v.prototype._requires_ack=function(e){var n=Object.keys(this._sentMessages).length;if(n>this.maxMessageIdentifier)throw Error("Too many messages:"+n);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,this._sentMessages[e.messageIdentifier]=e,e.type===i.PUBLISH&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},v.prototype._on_socket_open=function(){var e=new p(i.CONNECT,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},v.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data);for(var n=this._deframeMessages(e.data),i=0;i<n.length;i+=1)this._handleMessage(n[i])},v.prototype._deframeMessages=function(e){var n=new Uint8Array(e),i=[];if(this.receiveBuffer){var o=new Uint8Array(this.receiveBuffer.length+n.length);o.set(this.receiveBuffer),o.set(n,this.receiveBuffer.length),n=o,delete this.receiveBuffer}try{for(var t=0;t<n.length;){var s=l(n,t),r=s[0];if(t=s[1],null===r)break;i.push(r)}t<n.length&&(this.receiveBuffer=n.subarray(t))}catch(e){var a="undefined"==e.hasOwnProperty("stack")?e.stack.toString():"No Error Stack Available";return void this._disconnected(_.INTERNAL_ERROR.code,c(_.INTERNAL_ERROR,[e.message,a]))}return i},v.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case i.CONNACK:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var n in this._sentMessages){var o=this._sentMessages[n];localStorage.removeItem("Sent:"+this._localKey+o.messageIdentifier)}for(var n in this._sentMessages={},this._receivedMessages){var t=this._receivedMessages[n];localStorage.removeItem("Received:"+this._localKey+t.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(_.CONNACK_RETURNCODE.code,c(_.CONNACK_RETURNCODE,[e.returnCode,s[e.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var r=[];for(var a in this._sentMessages)this._sentMessages.hasOwnProperty(a)&&r.push(this._sentMessages[a]);if(this._buffered_msg_queue.length>0)for(var l=null,g=this._buffered_msg_queue.reverse();l=g.pop();)r.push(l),this.onMessageDelivered&&(this._notify_msg_sent[l]=this.onMessageDelivered(l.payloadMessage));for(var m=0,f=(r=r.sort(function(e,n){return e.sequence-n.sequence})).length;m<f;m++){if((o=r[m]).type==i.PUBLISH&&o.pubRecReceived){var u=new p(i.PUBREL,{messageIdentifier:o.messageIdentifier});this._schedule_message(u)}else this._schedule_message(o)}this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var d=!1;this._reconnecting&&(d=!0,this._reconnectInterval=1,this._reconnecting=!1),this._connected(d,this._wsuri),this._process_queue();break;case i.PUBLISH:this._receivePublish(e);break;case i.PUBACK:(o=this._sentMessages[e.messageIdentifier])&&(delete this._sentMessages[e.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(o.payloadMessage));break;case i.PUBREC:if(o=this._sentMessages[e.messageIdentifier]){o.pubRecReceived=!0;u=new p(i.PUBREL,{messageIdentifier:e.messageIdentifier});this.store("Sent:",o),this._schedule_message(u)}break;case i.PUBREL:t=this._receivedMessages[e.messageIdentifier];localStorage.removeItem("Received:"+this._localKey+e.messageIdentifier),t&&(this._receiveMessage(t),delete this._receivedMessages[e.messageIdentifier]);var h=new p(i.PUBCOMP,{messageIdentifier:e.messageIdentifier});this._schedule_message(h);break;case i.PUBCOMP:o=this._sentMessages[e.messageIdentifier];delete this._sentMessages[e.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(o.payloadMessage);break;case i.SUBACK:(o=this._sentMessages[e.messageIdentifier])&&(o.timeOut&&o.timeOut.cancel(),128===e.returnCode[0]?o.onFailure&&o.onFailure(e.returnCode):o.onSuccess&&o.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case i.UNSUBACK:(o=this._sentMessages[e.messageIdentifier])&&(o.timeOut&&o.timeOut.cancel(),o.callback&&o.callback(),delete this._sentMessages[e.messageIdentifier]);break;case i.PINGRESP:this.sendPinger.reset();break;case i.DISCONNECT:this._disconnected(_.INVALID_MQTT_MESSAGE_TYPE.code,c(_.INVALID_MQTT_MESSAGE_TYPE,[e.type]));break;default:this._disconnected(_.INVALID_MQTT_MESSAGE_TYPE.code,c(_.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(e){var b="undefined"==e.hasOwnProperty("stack")?e.stack.toString():"No Error Stack Available";return void this._disconnected(_.INTERNAL_ERROR.code,c(_.INTERNAL_ERROR,[e.message,b]))}},v.prototype._on_socket_error=function(e){this._reconnecting||this._disconnected(_.SOCKET_ERROR.code,c(_.SOCKET_ERROR,[e.data]))},v.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(_.SOCKET_CLOSE.code,c(_.SOCKET_CLOSE))},v.prototype._socket_send=function(e){if(1==e.type){var n=this._traceMask(e,"password");this._trace("Client._socket_send",n)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},v.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var n=new p(i.PUBACK,{messageIdentifier:e.messageIdentifier});this._schedule_message(n),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var o=new p(i.PUBREC,{messageIdentifier:e.messageIdentifier});this._schedule_message(o);break;default:throw Error("Invaild qos="+wireMmessage.payloadMessage.qos)}},v.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},v.prototype._connected=function(e,n){this.onConnected&&this.onConnected(e,n)},v.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=2*this._reconnectInterval),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))},v.prototype._disconnected=function(e,n){if(this._trace("Client._disconnected",e,n),void 0!==e&&this._reconnecting)this._reconnectTimeout=new y(this,window,this._reconnectInterval,this._reconnect);else if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(void 0===e&&(e=_.OK.code,n=c(_.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:n,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),e!==_.OK.code&&this.connectOptions.reconnect)return this._reconnectInterval=1,void this._reconnect()}else 4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:n})},v.prototype._trace=function(){if(this.traceFunction){for(var e in arguments)void 0!==arguments[e]&&arguments.splice(e,1,JSON.stringify(arguments[e]));var n=Array.prototype.slice.call(arguments).join("");this.traceFunction({severity:"Debug",message:n})}if(null!==this._traceBuffer){e=0;for(var i=arguments.length;e<i;e++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===e?this._traceBuffer.push(arguments[e]):void 0===arguments[e]?this._traceBuffer.push(arguments[e]):this._traceBuffer.push("  "+JSON.stringify(arguments[e]))}},v.prototype._traceMask=function(e,n){var i={};for(var o in e)e.hasOwnProperty(o)&&(i[o]=o==n?"******":e[o]);return i};var k=function(e,n,i,t){var s;if("string"!=typeof e)throw new Error(c(_.INVALID_TYPE,[typeof e,"host"]));if(2==arguments.length){t=n;var r=(s=e).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!r)throw new Error(c(_.INVALID_ARGUMENT,[e,"host"]));e=r[4]||r[2],n=parseInt(r[7]),i=r[8]}else{if(3==arguments.length&&(t=i,i="/mqtt"),"number"!=typeof n||n<0)throw new Error(c(_.INVALID_TYPE,[typeof n,"port"]));if("string"!=typeof i)throw new Error(c(_.INVALID_TYPE,[typeof i,"path"]));var a=-1!==e.indexOf(":")&&"["!==e.slice(0,1)&&"]"!==e.slice(-1);s="ws://"+(a?"["+e+"]":e)+":"+n+i}for(var p=0,l=0;l<t.length;l++){var g=t.charCodeAt(l);55296<=g&&g<=56319&&l++,p++}if("string"!=typeof t||p>65535)throw new Error(c(_.INVALID_ARGUMENT,[t,"clientId"]));var m=new v(s,e,n,i,t);this._getHost=function(){return e},this._setHost=function(){throw new Error(c(_.UNSUPPORTED_OPERATION))},this._getPort=function(){return n},this._setPort=function(){throw new Error(c(_.UNSUPPORTED_OPERATION))},this._getPath=function(){return i},this._setPath=function(){throw new Error(c(_.UNSUPPORTED_OPERATION))},this._getURI=function(){return s},this._setURI=function(){throw new Error(c(_.UNSUPPORTED_OPERATION))},this._getClientId=function(){return m.clientId},this._setClientId=function(){throw new Error(c(_.UNSUPPORTED_OPERATION))},this._getOnConnected=function(){return m.onConnected},this._setOnConnected=function(e){if("function"!=typeof e)throw new Error(c(_.INVALID_TYPE,[typeof e,"onConnected"]));m.onConnected=e},this._getDisconnectedPublishing=function(){return m.disconnectedPublishing},this._setDisconnectedPublishing=function(e){m.disconnectedPublishing=e},this._getDisconnectedBufferSize=function(){return m.disconnectedBufferSize},this._setDisconnectedBufferSize=function(e){m.disconnectedBufferSize=e},this._getOnConnectionLost=function(){return m.onConnectionLost},this._setOnConnectionLost=function(e){if("function"!=typeof e)throw new Error(c(_.INVALID_TYPE,[typeof e,"onConnectionLost"]));m.onConnectionLost=e},this._getOnMessageDelivered=function(){return m.onMessageDelivered},this._setOnMessageDelivered=function(e){if("function"!=typeof e)throw new Error(c(_.INVALID_TYPE,[typeof e,"onMessageDelivered"]));m.onMessageDelivered=e},this._getOnMessageArrived=function(){return m.onMessageArrived},this._setOnMessageArrived=function(e){if("function"!=typeof e)throw new Error(c(_.INVALID_TYPE,[typeof e,"onMessageArrived"]));m.onMessageArrived=e},this._getTrace=function(){return m.traceFunction},this._setTrace=function(e){if("function"!=typeof e)throw new Error(c(_.INVALID_TYPE,[typeof e,"onTrace"]));m.traceFunction=e},this.connect=function(e){if(o(e=e||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),e.mqttVersion>4||e.mqttVersion<3)throw new Error(c(_.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0!==e.password&&void 0===e.userName)throw new Error(c(_.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof E))throw new Error(c(_.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload=null,void 0===e.willMessage.destinationName)throw new Error(c(_.INVALID_TYPE,[typeof e.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}if(void 0===e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(c(_.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(c(_.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var n=!1,t=0;t<e.hosts.length;t++){if("string"!=typeof e.hosts[t])throw new Error(c(_.INVALID_TYPE,[typeof e.hosts[t],"connectOptions.hosts["+t+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[t])){if(0===t)n=!0;else if(!n)throw new Error(c(_.INVALID_ARGUMENT,[e.hosts[t],"connectOptions.hosts["+t+"]"]))}else if(n)throw new Error(c(_.INVALID_ARGUMENT,[e.hosts[t],"connectOptions.hosts["+t+"]"]))}if(n)e.uris=e.hosts;else{if(!e.ports)throw new Error(c(_.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(c(_.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!==e.ports.length)throw new Error(c(_.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));e.uris=[];for(t=0;t<e.hosts.length;t++){if("number"!=typeof e.ports[t]||e.ports[t]<0)throw new Error(c(_.INVALID_TYPE,[typeof e.ports[t],"connectOptions.ports["+t+"]"]));var r=e.hosts[t],a=e.ports[t],p=-1!==r.indexOf(":");s="ws://"+(p?"["+r+"]":r)+":"+a+i,e.uris.push(s)}}}m.connect(e)},this.subscribe=function(e,n){if("string"!=typeof e)throw new Error("Invalid argument:"+e);if(o(n=n||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),n.timeout&&!n.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==n.qos&&0!==n.qos&&1!==n.qos&&2!==n.qos)throw new Error(c(_.INVALID_ARGUMENT,[n.qos,"subscribeOptions.qos"]));m.subscribe(e,n)},this.unsubscribe=function(e,n){if("string"!=typeof e)throw new Error("Invalid argument:"+e);if(o(n=n||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),n.timeout&&!n.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");m.unsubscribe(e,n)},this.send=function(e,n,i,o){var t;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof E)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(t=e).destinationName)throw new Error(c(_.INVALID_ARGUMENT,[t.destinationName,"Message.destinationName"]));m.send(t)}else(t=new E(n)).destinationName=e,arguments.length>=3&&(t.qos=i),arguments.length>=4&&(t.retained=o),m.send(t)},this.publish=function(e,n,i,o){var t;if(console.log("Publising message to: ",e),0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof E)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(t=e).destinationName)throw new Error(c(_.INVALID_ARGUMENT,[t.destinationName,"Message.destinationName"]));m.send(t)}else(t=new E(n)).destinationName=e,arguments.length>=3&&(t.qos=i),arguments.length>=4&&(t.retained=o),m.send(t)},this.disconnect=function(){m.disconnect()},this.getTraceLog=function(){return m.getTraceLog()},this.startTrace=function(){m.startTrace()},this.stopTrace=function(){m.stopTrace()},this.isConnected=function(){return m.connected}};k.prototype={get host(){return this._getHost()},set host(e){this._setHost(e)},get port(){return this._getPort()},set port(e){this._setPort(e)},get path(){return this._getPath()},set path(e){this._setPath(e)},get clientId(){return this._getClientId()},set clientId(e){this._setClientId(e)},get onConnected(){return this._getOnConnected()},set onConnected(e){this._setOnConnected(e)},get disconnectedPublishing(){return this._getDisconnectedPublishing()},set disconnectedPublishing(e){this._setDisconnectedPublishing(e)},get disconnectedBufferSize(){return this._getDisconnectedBufferSize()},set disconnectedBufferSize(e){this._setDisconnectedBufferSize(e)},get onConnectionLost(){return this._getOnConnectionLost()},set onConnectionLost(e){this._setOnConnectionLost(e)},get onMessageDelivered(){return this._getOnMessageDelivered()},set onMessageDelivered(e){this._setOnMessageDelivered(e)},get onMessageArrived(){return this._getOnMessageArrived()},set onMessageArrived(e){this._setOnMessageArrived(e)},get trace(){return this._getTrace()},set trace(e){this._setTrace(e)}};var E=function(e){var n,i;if(!("string"==typeof e||e instanceof ArrayBuffer||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array))throw c(_.INVALID_ARGUMENT,[e,"newPayload"]);n=e,this._getPayloadString=function(){return"string"==typeof n?n:h(n,0,n.length)},this._getPayloadBytes=function(){if("string"==typeof n){var e=new ArrayBuffer(u(n)),i=new Uint8Array(e);return d(n,i,0),i}return n},this._getDestinationName=function(){return i},this._setDestinationName=function(e){if("string"!=typeof e)throw new Error(c(_.INVALID_ARGUMENT,[e,"newDestinationName"]));i=e};var o=0;this._getQos=function(){return o},this._setQos=function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);o=e};var t=!1;this._getRetained=function(){return t},this._setRetained=function(e){if("boolean"!=typeof e)throw new Error(c(_.INVALID_ARGUMENT,[e,"newRetained"]));t=e};var s=!1;this._getDuplicate=function(){return s},this._setDuplicate=function(e){s=e}};return E.prototype={get payloadString(){return this._getPayloadString()},get payloadBytes(){return this._getPayloadBytes()},get destinationName(){return this._getDestinationName()},set destinationName(e){this._setDestinationName(e)},get topic(){return this._getDestinationName()},set topic(e){this._setDestinationName(e)},get qos(){return this._getQos()},set qos(e){this._setQos(e)},get retained(){return this._getRetained()},set retained(e){this._setRetained(e)},get duplicate(){return this._getDuplicate()},set duplicate(e){this._setDuplicate(e)}},{Client:k,Message:E}}(window);return e.MQTT=n,n},e.exports=o()}]);