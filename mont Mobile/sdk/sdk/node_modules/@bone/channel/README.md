# Channel
> Channel是阿里云IoT提供的长连接解决方案
## 特性
* 快速简单，只有5个接口，快速上手
* 统一鉴权，无需关心安全问题
* 高性能、高稳定性

## 快速上手

### 引入channel库
```bash
bnpm i --save @bone/channel
```
* bnpm为阿里云IoT提供的包管理工具，若第一次使用，可查看[安装指引](https://open.aliplus.com/bone/tool/bnpm.html)
* 若需要直接引用channel.js，可以直接引用`lib/dist.min.js`


### 使用接口开发
```js
import channel from '@bone/channel';
import logger from '@bone/logger';

logger.conf = logger.DEF_CONF.development;
const log = logger.create({
    module: 'index',
    label: ['demo']
});

channel
    .ready({
        // 用户id
        id: '12345678',
        // 用户token
        token: 'xxxxxxxx'
    })
    .then(()=>{
        log.info('channel ready'); 

        channel.subscribe('/demo/push', (...args)=>{
            log.info('/demo/push received:', ...args);
        });

        channel.publish('/demo/push', { msg: 'hello' }, (...args)=>{
            log.info('/demo/push delivered:', ...args);
        });

        channel.request('/demo/rpc', { msg: 'hello' }, (res)=>{
            log.info('/demo/rpc response:', res);
        });

        channel.on(channel.EVENT_CONNECT_STATUS_CHANGE, (type)=>{
            log.info('connect status changed:', msg);
        });
    })
    .catch((err)=>{
        log.warn('channel failed ready, you can retry later', err);
    });
```

注意：
* 上述demo使用ES6开发，因此依赖babel进行转换后方可正常运行，若不想使用babel，可以直接用ES5的方式开发
* logger为Bone提供的日志工具，不是必选项，但是channel内部默认会使用logger打印日志，方便开发者调试

## API文档
> API文档详见[docs/index.html](./docs/class/src/Interface.js~ChannelInterface.html)，本文档由esdoc生成。