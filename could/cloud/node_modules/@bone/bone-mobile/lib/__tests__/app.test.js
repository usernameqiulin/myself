'use strict';

var _enzyme = require('enzyme');

var _enzymeAdapterReact = require('enzyme-adapter-react-15.4');

var _enzymeAdapterReact2 = _interopRequireDefault(_enzymeAdapterReact);

var _jsdom = require('jsdom');

var _jsdom2 = _interopRequireDefault(_jsdom);

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _app = require('../app');

var _app2 = _interopRequireDefault(_app);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// setup file
var doc = _jsdom2.default.jsdom('<!doctype html><html><body><div id="rootTag"></div></body></html>');
global.document = doc;
global.window = doc.defaultView;
(0, _enzyme.configure)({ adapter: new _enzymeAdapterReact2.default() });

describe('test App setup', function () {
  test('test createApp export', function () {
    expect(_app2.default).toBeDefined();
  });

  test('createApp', function () {
    expect.assertions(4);

    function HomePage() {
      return _react2.default.createElement(
        'div',
        null,
        'home page'
      );
    }

    var app = (0, _app2.default)({
      router: {
        routes: [{
          // 精确匹配
          path: '/',
          exact: true,
          page: HomePage,
          initialProps: {
            title: 'page title'
            // navbar params
            // page specified params
          }
        }]
      },

      autoStart: false
    });

    app.on('appDidStart', function (appInstance) {
      expect(appInstance).toEqual(app);
    });

    app.start();

    expect(app).toBeDefined();
    expect(app.start).toBeDefined();
    expect(app.exit).toBeDefined();

    expect(function () {
      (0, _app2.default)({
        router: {
          routes: []
        }
      });
    }).toThrow();
  });
});